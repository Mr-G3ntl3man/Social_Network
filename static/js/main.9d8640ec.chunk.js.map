{"version":3,"sources":["components/StartPage/homePage.module.scss","components/Profile/MyPosts/MyPosts.module.scss","components/common/ButtonBurger/burger.module.scss","App.module.scss","components/Profile/Profile.module.css","components/Header/Header.module.scss","components/common/NotFound/notFound.module.scss","redux/reducer/users-reducer.ts","api/chat-api.ts","redux/reducer/chat-reducer.ts","components/common/Tooltip/Tooltip.tsx","components/common/Preloader/preloader.module.css","components/Login/form.module.scss","api/api.ts","components/SpotifyMusic/music.module.scss","redux/reducer/app-reducer.ts","components/common/NeonBtn/btn.module.scss","redux/reducer/profile-reducer.ts","redux/reducer/localStorage/localStorage.ts","redux/reducer/dialog-reducer.ts","components/common/ButtonBurger/ButtonBurger.tsx","components/Sidebar/Sidebar.tsx","components/Header/Header.tsx","App.tsx","reportWebVitals.ts","redux/redux-store.ts","index.tsx","components/Profile/ProfileInfo/ProfileInfo.module.scss","redux/reducer/spotify-reducer.ts","components/Sidebar/Sidebar.module.scss","Router/Routes.tsx","components/common/NeonBtn/NeonBtn.tsx","image/rocket.png","components/StartPage/StartPage.tsx","components/Login/LoginForm.tsx","components/Profile/ProfileInfo/ProfileContact.tsx","components/Profile/ProfileInfo/ProfileStatus.tsx","components/Profile/ProfileInfo/ProfileInfo.tsx","components/Profile/ProfileInfo/ProfileInfoEditForm.tsx","components/Profile/ProfileInfo/ProfileDesc.tsx","redux/selectors/profile-selector.ts","components/Profile/MyPosts/Post/Post.tsx","components/Profile/MyPosts/MyPosts.tsx","components/Profile/Profile.tsx","components/common/NotFound/NotFound.tsx","image/SpotifyIcon.svg","components/SpotifyMusic/LoginSpotify.tsx","components/SpotifyMusic/SearchResult.tsx","components/SpotifyMusic/PlayerSpotify.tsx","image/Spotify.svg","components/SpotifyMusic/Dashboard.tsx","components/SpotifyMusic/useAuth.ts","components/SpotifyMusic/Music.tsx","api/spotify-api.ts","components/Profile/MyPosts/Post/Post.module.scss","components/common/Preloader/Preloader.tsx","redux/reducer/auth-reducer.ts"],"names":["module","exports","ACTION_TYPE_USERS","initialState","users","pageSize","totalUserCount","currentPage","isFetching","followingInProgress","usersReducer","state","action","type","TOGGLE_FOLLOW","map","el","id","userId","followed","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USERS_COUNT","totalUsersCount","TOGGLE_IS_FETCHING","SET_IS_FOLLOWING_PROGRESS","filter","SET_PAGE_SIZE","setCurrentPage","toggleIsFetchingAC","toggleFollowingProgress","getUsers","dispatch","a","usersAPI","response","items","totalCount","followUnfollow","userID","apiMethod","resultCode","RESULT_CODE","SUCCESSFULLY","installCaughtError","messages","followSuccess","followUser","unFollowSuccess","unFollow","Events","ACTION_TYPE_CHAT","WS_STATUS","ws","subscribes","MESSAGES_RECEIVED","STATUS_CHANGED","notifyAboutStatusS","status","forEach","s","openHandler","READY","errorHandler","ERROR","closeHandler","PENDING","setTimeout","createChannel","messageHandler","e","newMessages","JSON","parse","data","cleanUp","removeEventListener","close","WebSocket","addEventListener","chatApi","callback","push","message","send","error","chatReducer","payload","m","v1","index","array","length","newMessHandler","mess","newStatusHandler","statusChanged","subscribeMessageHandler","subscribeStatusHandler","startMessagesListening","stopMessagesListening","sendMessage","Tooltip","props","severity","anchorOrigin","open","useState","openTooltip","setOpenTooltip","handleClose","autoHideDuration","onClose","style","fontFamily","letterSpacing","variant","instance","axios","create","withCredentials","baseURL","headers","get","then","post","delete","profileAPI","getProfile","getStatus","updateStatus","put","savePhoto","photoFile","formData","FormData","append","saveProfile","profile","authAPI","getUserData","login","date","logout","securityApi","getCaptchaUrl","ACTION_TYPE_APP","initialized","catchError","messageError","appReducer","SUCCESSFUL_INITIALIZATION","CATCH_ERROR","initializedApp","Promise","all","ACTION_TYPE_PROFILE","saveState","key","stateAsString","stringify","localStorage","setItem","restoreState","defaultState","getItem","posts","newPostText","profileReducer","ADD_POST","stateCopy","likesCount","UPDATE_NEW_POST","newText","SET_USER_PROFILE","SET_STATUS","SAVE_PHOTO","photos","SET_LIKE","p","like","GET_USER_POST","DELETE_POST","addPostAC","changeTextAC","setStatusAC","setLikeSuccess","setLike","deletePostSuccess","deletePost","setUserProfile","file","getState","auth","userData","ACTION_TYPE_DIALOGS","ButtonBurger","setOpen","finalClassName","header__burger","onClick","toggleOpenMenu","className","header__line","Sidebar","authorizedUser","useSelector","collapsed","setCollapsed","scrollDistance","setScrollDistance","onClickHandler","listenerScroll","window","scrollY","listenerResize","innerWidth","fixedSideBarClassName","fixedSideBar","fixed","useEffect","Sider","trigger","collapsible","layoutHidden","onCollapse","sideBarTrigger","theme","mode","Item","icon","ProfileOutlined","to","PATH","HOME","UserOutlined","USERS","CommentOutlined","CHAT","CustomerServiceOutlined","SPOTIFY_MUSIC","Header","navigate","useNavigate","useDispatch","authDate","avatar","photo","makeStyles","default","marginLeft","header","src","small","size","loginBlock","Button","color","LOGIN","App","app","Content","Layout","Footer","catchUnhandledRejection","useCallback","reason","layoutSider","minHeight","margin","siteLayout","content","footer","vertical","horizontal","Preloader","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","dialogs","name","newMessage","rootReducer","combineReducers","profilePage","dialogsPage","UPDATE_NEW_MESSAGE","ADD_MESSAGE","newMess","usersPage","authReducer","chat","spotify","spotifyReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById","ACTION_TYPE_SPOTIFY","token","accessToken","refreshToken","expiresIn","dashboard","search","lyrics","searchResults","playingTrack","recommendedTracks","isAuth","SET_IS_FETCHING","SET_TOKEN_INFO","REFRESH_TOKEN_INFO","SET_LYRICS","SET_SEARCH","SET_CHOOSE_TRACK","track","SET_SEARCH_RESULTS","SET_RECOMMENDED_TRACKS","playlist","SET_AUTH","refreshTokenInfo","setSearchResults","setLoadingData","setSearch","loginTokenSpotify","code","spotifyAPI","loginToken","Error","refreshTokenSpotify","setChooseTrack","chooseTrack","setLyricsOfPlayingSong","title","artist","getLyrics","setTracks","smallestAlbumImage","album","images","reduce","smallest","image","height","artists","uri","albumUrl","url","getSearchResults","cancelSearch","searchTracks","res","console","log","body","tracks","getRecommendedTracks","getRecommended","NeonBtn","callBack","link","goAnotherSite","href","btn","line","lineTop","lineLeft","lineRight","lineBottom","StartPage","isAuthSpotify","isLogout","homePage","wrap","mainTitle","rocket","alt","desc","target","descTeh","btnGroup","replace","LoginForm","statusMessages","resultStatusMessage","captchaUrl","schema","yup","shape","email","required","password","useForm","resolver","yupResolver","register","handleSubmit","errors","formState","useStyles","position","display","justifyContent","flexDirection","alignItems","container","padding","Container","Snackbar","width","noValidate","onSubmit","TextField","fullWidth","helperText","label","autoComplete","FormControlLabel","alignSelf","control","Checkbox","marginBottom","textAlign","captcha","LoginPage","ProfileContact","profileContact","contactTitle","profileContactList","profileContactItem","contacts","facebook","linkFacebook","defaultLink","linkNone","vk","linkVk","twitter","linkTwitter","instagram","linkInstagram","youtube","linkYoutube","github","linkGithub","mainLink","linkMainLink","website","linkWebsite","ProfileStatus","editMode","setState","statusUser","editBlock","autoFocus","multiline","minRows","maxRows","onBlur","onChange","value","stateStatus","ProfileInfo","authorizedProfile","profileContent","fullName","spanDefault","aboutMe","lookingForAJob","lookingForAJobDescription","contactsWrap","setEditMode","ProfileInfoEditForm","defaultValues","input","profileEditWrap","profileEditInfo","profileEditInfoDesc","defaultChecked","profileEditContact","profileEditContactDesc","profileEditContactWrap","profileEditContactLeft","profileEditContactRight","ProfileDesc","profileWrap","profileBackground","profileDesc","flexLeft","profileAvatar","large","border","borderRadius","htmlFor","files","accept","multiple","fontSize","component","profileInfo","getProfileStatus","getAuthorizedUserId","Post","Paper","elevation","postWrap","postAvatar","likeControl","IconButton","aria-label","likeCount","clearIcon","MyPosts","React","memo","postElem","main","addPost","textFieldWrap","currentTarget","btnWrap","addPostBtn","ProfileContainer","connect","authorizedUserId","fetching","useParams","isNaN","Number","NotFound","LoginSpotify","logo","AUTH_URL","SearchResult","searchResult","descWrap","trackTitle","trackArtist","PlayerSpotify","trackUri","play","setPlay","styles","sliderColor","showSaveIcon","isPlaying","uris","Dashboard","startSearch","setStartSearch","history","pushState","interval","setInterval","clearInterval","useAuth","setAccessToken","cancel","trackSearchResult","recommendedMusic","spotifyLogo","trimLeft","song","notSearch","notFound","player","none","URLSearchParams","location","Music","UsersContainer","lazy","GeneralChat","Routers","fallback","path","element","PROFILE_USER","spotifyWebApi","SpotifyWebApi","clientId","params","getRecommendations","min_energy","seed_genres","min_popularity","getAvailableGenreSeeds","preloader","xmlns","viewBox","preserveAspectRatio","transform","attributeName","values","keyTimes","dur","repeatCount","calcMode","keySplines","cx","cy","r","stroke","stroke-width","fill","stroke-dasharray","d","begin","ACTION_TYPE_AUTH","SET_USER_DATA","SET_RESULT_STATUS","GET_CAPTCHA_SUCCESS","SET_PHOTO","SET_LOGOUT","setUserDataAC","setLogout","setStatusMessAC","authUserProfile","setAuthorizedUserPhoto","CAPTCHA"],"mappings":"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","file":"static/js/main.9d8640ec.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"homePage_wrap__3aeN-\",\"mainTitle\":\"homePage_mainTitle__2REBg\",\"flash-border\":\"homePage_flash-border__1cyxj\",\"printed-text\":\"homePage_printed-text__1WDDQ\",\"desc\":\"homePage_desc__9iIaD\",\"descTeh\":\"homePage_descTeh__1vAys\",\"accountCredentials\":\"homePage_accountCredentials__39xwD\",\"btnGroup\":\"homePage_btnGroup__U5STf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"MyPosts_main__1K2VD\",\"addPost\":\"MyPosts_addPost__3V9XG\",\"textFieldWrap\":\"MyPosts_textFieldWrap__2LQX0\",\"addPostBtn\":\"MyPosts_addPostBtn__qaThv\",\"btnWrap\":\"MyPosts_btnWrap__2cd39\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header__line\":\"burger_header__line__1NrkN\",\"header__burger\":\"burger_header__burger__17a6t\",\"open\":\"burger_open__3thfe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"App_content__14CTo\",\"layoutSider\":\"App_layoutSider__af_rX\",\"siteLayout\":\"App_siteLayout__20uJF\",\"footer\":\"App_footer__15YTJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Profile_main__1zOiw\",\"fetching\":\"Profile_fetching__2PCOk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1A8HE\",\"logo\":\"Header_logo__2Awwq\",\"loginBlock\":\"Header_loginBlock__2NjNE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"notFound_wrap__377Ub\",\"title\":\"notFound_title__LzkRV\",\"flash-border\":\"notFound_flash-border__31YdZ\",\"printed-text\":\"notFound_printed-text__IDRhF\"};","import {Dispatch} from \"redux\";\r\nimport {RESULT_CODE, usersAPI} from \"../../api/api\";\r\nimport {installCaughtError} from \"./app-reducer\";\r\n\r\nexport enum ACTION_TYPE_USERS {\r\n   TOGGLE_FOLLOW = 'social_network/users/TOGGLE_FOLLOW',\r\n   SET_USERS = 'social_network/users/SET_USERS',\r\n   SET_CURRENT_PAGE = 'social_network/users/SET_CURRENT_PAGE',\r\n   SET_TOTAL_USERS_COUNT = 'social_network/users/SET_TOTAL_USERS_COUNT',\r\n   TOGGLE_IS_FETCHING = 'social_network/users/TOGGLE_IS_FETCHING',\r\n   SET_PAGE_SIZE = 'social_network/users/SET_PAGE_SIZE',\r\n   SET_IS_FOLLOWING_PROGRESS = 'social_network/users/SET_IS_FOLLOWING_PROGRESS'\r\n}\r\n\r\ntype ActionType =\r\n   ReturnType<typeof toggleFollow>\r\n   | ReturnType<typeof setUsersAC>\r\n   | ReturnType<typeof setCurrentPage>\r\n   | ReturnType<typeof setTotalUsersCountAC>\r\n   | ReturnType<typeof toggleIsFetchingAC>\r\n   | ReturnType<typeof toggleFollowingProgress>\r\n   | ReturnType<typeof setPageSize>\r\n\r\ntype LocationType = {\r\n   city: string\r\n   country: string\r\n}\r\ntype PhotoType = {\r\n   small: string | null\r\n   large: string | null\r\n}\r\n\r\nexport type UserType = {\r\n   id: number\r\n   photos: PhotoType\r\n   followed: boolean\r\n   name: string\r\n   status: string\r\n   uniqueUrlName?: string | null\r\n   location?: LocationType\r\n}\r\n\r\nexport type UsersType = {\r\n   users: UserType[]\r\n   pageSize: number\r\n   totalUserCount: number\r\n   currentPage: number\r\n   isFetching: boolean\r\n   followingInProgress: number[]\r\n}\r\n\r\nconst initialState: UsersType = {\r\n   users: [],\r\n   pageSize: 10,\r\n   totalUserCount: 0,\r\n   currentPage: 1,\r\n   isFetching: false,\r\n   followingInProgress: []\r\n}\r\n\r\nexport const usersReducer = (state = initialState, action: ActionType): UsersType => {\r\n   switch (action.type) {\r\n      case ACTION_TYPE_USERS.TOGGLE_FOLLOW:\r\n         const users = state.users.map(el => el.id === action.userId ? {...el, followed: !el.followed} : el)\r\n\r\n         return {...state, users: users}\r\n\r\n      case ACTION_TYPE_USERS.SET_USERS:\r\n         return {...state, users: [...action.users]}\r\n\r\n      case ACTION_TYPE_USERS.SET_CURRENT_PAGE:\r\n         return {...state, currentPage: action.currentPage}\r\n\r\n      case ACTION_TYPE_USERS.SET_TOTAL_USERS_COUNT:\r\n         return {...state, totalUserCount: action.totalUsersCount}\r\n\r\n      case ACTION_TYPE_USERS.TOGGLE_IS_FETCHING:\r\n         return {...state, isFetching: action.isFetching}\r\n\r\n      case ACTION_TYPE_USERS.SET_IS_FOLLOWING_PROGRESS:\r\n         return {\r\n            ...state,\r\n            followingInProgress: action.isFetching\r\n               ? [...state.followingInProgress, action.userId]\r\n               : state.followingInProgress.filter(id => id !== action.userId)\r\n         }\r\n\r\n      case ACTION_TYPE_USERS.SET_PAGE_SIZE:\r\n         return {...state, pageSize: action.pageSize}\r\n\r\n      default:\r\n         return {...state}\r\n   }\r\n}\r\n\r\nexport const toggleFollow = (userId: number) => {\r\n   return {\r\n      type: ACTION_TYPE_USERS.TOGGLE_FOLLOW,\r\n      userId\r\n   } as const\r\n}\r\n\r\nexport const setUsersAC = (users: UserType[]) => {\r\n   return {\r\n      type: ACTION_TYPE_USERS.SET_USERS,\r\n      users\r\n   } as const\r\n}\r\n\r\nexport const setCurrentPage = (currentPage: number) => {\r\n   return {\r\n      type: ACTION_TYPE_USERS.SET_CURRENT_PAGE,\r\n      currentPage\r\n   } as const\r\n}\r\n\r\nexport const setTotalUsersCountAC = (totalUsersCount: number) => {\r\n   return {\r\n      type: ACTION_TYPE_USERS.SET_TOTAL_USERS_COUNT,\r\n      totalUsersCount\r\n   } as const\r\n}\r\n\r\nexport const toggleIsFetchingAC = (isFetching: boolean) => {\r\n   return {\r\n      type: ACTION_TYPE_USERS.TOGGLE_IS_FETCHING,\r\n      isFetching\r\n   } as const\r\n}\r\n\r\nexport const setPageSize = (pageSize: number) => {\r\n   return {\r\n      type: ACTION_TYPE_USERS.SET_PAGE_SIZE,\r\n      pageSize\r\n   } as const\r\n}\r\n\r\nexport const toggleFollowingProgress = (isFetching: boolean, userId: number) => {\r\n   return {\r\n      type: ACTION_TYPE_USERS.SET_IS_FOLLOWING_PROGRESS,\r\n      isFetching,\r\n      userId\r\n   } as const\r\n}\r\n\r\nexport const getUsers = (currentPage: number, pageSize: number) => {\r\n   return async (dispatch: Dispatch<ActionType>) => {\r\n      dispatch(toggleIsFetchingAC(true))\r\n      dispatch(setCurrentPage(currentPage))\r\n\r\n      const response = await usersAPI.getUsers(currentPage, pageSize)\r\n\r\n      dispatch(setUsersAC(response.items))\r\n\r\n      dispatch(setTotalUsersCountAC(response.totalCount))\r\n\r\n      dispatch(toggleIsFetchingAC(false))\r\n   }\r\n}\r\n\r\nconst followUnfollow = async (dispatch: Dispatch<ActionType> | any, userID: number, apiMethod: (id: number) => Promise<any>) => {\r\n\r\n   dispatch(toggleFollowingProgress(true, userID))\r\n\r\n   const response = await apiMethod(userID)\r\n\r\n   response.resultCode === RESULT_CODE.SUCCESSFULLY && dispatch(toggleFollow(userID))\r\n   response.resultCode !== RESULT_CODE.SUCCESSFULLY && dispatch(installCaughtError(response.messages, 'warning'))\r\n\r\n   dispatch(toggleFollowingProgress(false, userID))\r\n}\r\n\r\nexport const followSuccess = (id: number) => {\r\n   return (dispatch: Dispatch<ActionType>) => {\r\n      followUnfollow(dispatch, id, usersAPI.followUser)\r\n   }\r\n}\r\n\r\nexport const unFollowSuccess = (id: number) => {\r\n   return async (dispatch: Dispatch<ActionType>) => {\r\n      followUnfollow(dispatch, id, usersAPI.unFollow)\r\n   }\r\n}\r\n\r\n","import {WS_STATUS} from \"../redux/reducer/chat-reducer\";\r\n\r\nexport enum Events {\r\n   MESSAGES_RECEIVED = 'MESSAGES_RECEIVED',\r\n   STATUS_CHANGED = 'STATUS_CHANGED',\r\n}\r\n\r\nlet ws: WebSocket | null = null\r\n\r\nconst subscribes = {\r\n   [Events.MESSAGES_RECEIVED]: [] as MessagesReceivedT[],\r\n   [Events.STATUS_CHANGED]: [] as StatusChangedT[]\r\n}\r\n\r\nconst notifyAboutStatusS = (status: WS_STATUS) => subscribes[Events.STATUS_CHANGED].forEach(s => s(status))\r\n\r\nconst openHandler = () => notifyAboutStatusS(WS_STATUS.READY)\r\n\r\nconst errorHandler = () => notifyAboutStatusS(WS_STATUS.ERROR)\r\n\r\nconst closeHandler = () => {\r\n   notifyAboutStatusS(WS_STATUS.PENDING)\r\n   setTimeout(createChannel, 3000)\r\n}\r\n\r\nconst messageHandler = (e: MessageEvent) => {\r\n   const newMessages = JSON.parse(e.data)\r\n\r\n   subscribes[Events.MESSAGES_RECEIVED].forEach(s => s(newMessages))\r\n}\r\n\r\nconst cleanUp = () => {\r\n   ws?.removeEventListener('close', closeHandler)\r\n   ws?.removeEventListener('message', messageHandler)\r\n   ws?.removeEventListener('open', openHandler)\r\n   ws?.removeEventListener('error', errorHandler)\r\n}\r\n\r\nconst createChannel = () => {\r\n   cleanUp()\r\n   ws?.close()\r\n\r\n   ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\r\n\r\n   notifyAboutStatusS(WS_STATUS.PENDING)\r\n\r\n   ws.addEventListener('open', openHandler)\r\n   ws.addEventListener('message', messageHandler)\r\n   ws.addEventListener('close', closeHandler)\r\n   ws.addEventListener('error', errorHandler)\r\n}\r\n\r\nexport const chatApi = {\r\n   start() {\r\n      createChannel()\r\n   },\r\n   stop() {\r\n      subscribes[Events.MESSAGES_RECEIVED] = []\r\n      subscribes[Events.STATUS_CHANGED] = []\r\n      cleanUp()\r\n      ws?.close()\r\n   },\r\n   subscribeStatus(callback: StatusChangedT) {\r\n      subscribes[Events.STATUS_CHANGED].push(callback)\r\n\r\n      return () => subscribes[Events.STATUS_CHANGED] = subscribes[Events.STATUS_CHANGED].filter(s => s !== callback)\r\n   },\r\n   subscribeMessage(callback: MessagesReceivedT) {\r\n      subscribes[Events.MESSAGES_RECEIVED].push(callback)\r\n\r\n      return () => subscribes[Events.MESSAGES_RECEIVED] = subscribes[Events.MESSAGES_RECEIVED].filter(s => s !== callback)\r\n   },\r\n   sendMessage(message: string) {\r\n      ws?.send(message)\r\n   }\r\n}\r\n\r\nexport type ChatMessageApiT = {\r\n   message: string\r\n   photo: string\r\n   userId: number\r\n   userName: string\r\n}\r\n\r\ntype MessagesReceivedT = (messages: ChatMessageApiT[]) => void\r\ntype StatusChangedT = (status: WS_STATUS) => void\r\n\r\n","import {Dispatch} from \"redux\";\r\nimport {ThunkAction} from \"redux-thunk\";\r\nimport {AppRootStateT} from \"../redux-store\";\r\nimport {chatApi, ChatMessageApiT} from \"../../api/chat-api\";\r\nimport {v1} from \"uuid\";\r\n\r\nexport enum ACTION_TYPE_CHAT {\r\n   MESSAGES_RECEIVED = 'social_network/chat/MESSAGES_RECEIVED',\r\n   STATUS_CHANGED = 'social_network/chat/STATUS_CHANGED'\r\n}\r\n\r\nexport enum WS_STATUS {\r\n   PENDING = 'PENDING',\r\n   READY = 'READY',\r\n   ERROR = 'ERROR'\r\n}\r\n\r\nexport type ChatMessageT = ChatMessageApiT & { id: string }\r\n\r\nexport type ChatStateT = {\r\n   messages: ChatMessageT[]\r\n   status: WS_STATUS\r\n   error: boolean\r\n}\r\n\r\ntype ActionType = ReturnType<typeof messagesReceived> | ReturnType<typeof statusChanged>\r\n\r\ntype ThunkActionT = ThunkAction<void, AppRootStateT, unknown, ActionType>\r\n\r\nconst initialState: ChatStateT = {\r\n   messages: [],\r\n   status: WS_STATUS.PENDING,\r\n   error: false\r\n}\r\n\r\nexport const chatReducer = (state = initialState, action: ActionType): ChatStateT => {\r\n   switch (action.type) {\r\n      case ACTION_TYPE_CHAT.MESSAGES_RECEIVED:\r\n         return {\r\n            ...state,\r\n            messages: [\r\n               ...state.messages,\r\n               ...action.payload.map(m => ({...m, id: v1()}))]\r\n               .filter((m, index, array) => index >= array.length - 100)\r\n         }\r\n\r\n      case ACTION_TYPE_CHAT.STATUS_CHANGED:\r\n         return {...state, status: action.payload, error: action.payload === WS_STATUS.ERROR}\r\n\r\n      default:\r\n         return state\r\n   }\r\n}\r\n\r\n\r\nconst messagesReceived = (mess: ChatMessageT[]) => ({type: ACTION_TYPE_CHAT.MESSAGES_RECEIVED, payload: mess} as const)\r\nconst statusChanged = (status: WS_STATUS) => ({type: ACTION_TYPE_CHAT.STATUS_CHANGED, payload: status} as const)\r\n\r\nconst newMessHandler = (messages: ChatMessageApiT[], dispatch: Dispatch<ActionType>) => dispatch(messagesReceived(messages as ChatMessageT[]))\r\nconst newStatusHandler = (status: WS_STATUS, dispatch: Dispatch<ActionType>) => dispatch(statusChanged(status))\r\n\r\nconst subscribeMessageHandler = (dispatch: Dispatch<ActionType>) =>\r\n   chatApi.subscribeMessage((messages) => newMessHandler(messages, dispatch))\r\n\r\nconst subscribeStatusHandler = (dispatch: Dispatch<ActionType>) =>\r\n   chatApi.subscribeStatus((status) => newStatusHandler(status, dispatch))\r\n\r\nexport const startMessagesListening = (): ThunkActionT => (dispatch) => {\r\n   chatApi.start()\r\n   subscribeMessageHandler(dispatch)\r\n   subscribeStatusHandler(dispatch)\r\n}\r\n\r\nexport const stopMessagesListening = (): ThunkActionT => (dispatch) => {\r\n   chatApi.stop()\r\n   subscribeMessageHandler(dispatch)()\r\n   subscribeStatusHandler(dispatch)()\r\n}\r\n\r\nexport const sendMessage = (message: string): ThunkActionT => (dispatch) => {\r\n   chatApi.sendMessage(message)\r\n}","import React, {useState} from \"react\";\r\nimport MuiAlert from \"@mui/material/Alert\";\r\nimport Snackbar from \"@mui/material/Snackbar\";\r\n\r\ntype TooltipPropsType = {\r\n   messages: string | null\r\n   severity: \"error\" | \"warning\" | \"info\" | \"success\"\r\n   open: boolean\r\n   anchorOrigin: {\r\n      vertical: 'top' | 'bottom'\r\n      horizontal: \"right\" | 'left' | 'center'\r\n   }\r\n}\r\n\r\nexport const Tooltip: React.FC<TooltipPropsType> = (props) => {\r\n   const {messages, severity, anchorOrigin, open} = props\r\n\r\n   const [openTooltip, setOpenTooltip] = useState<boolean>(open)\r\n   const handleClose = () => setOpenTooltip(false)\r\n\r\n   return (\r\n      <Snackbar\r\n         anchorOrigin={anchorOrigin}\r\n         open={openTooltip}\r\n         autoHideDuration={1000}\r\n         onClose={handleClose}>\r\n         <MuiAlert\r\n            style={{\r\n               fontFamily: `Mochiy Pop P One, sans-serif`,\r\n               letterSpacing: '2px'\r\n            }}\r\n            variant=\"filled\"\r\n            onClose={handleClose}\r\n            severity={severity}>\r\n            {messages}\r\n         </MuiAlert>\r\n      </Snackbar>\r\n   )\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloader\":\"preloader_preloader__GgujW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"width\":\"form_width__wQrfa\"};","import axios from \"axios\";\r\nimport {ProfileEditFormType} from \"../redux/reducer/profile-reducer\";\r\nimport {FormDataType} from \"../redux/reducer/auth-reducer\";\r\n\r\nexport enum RESULT_CODE {\r\n   SUCCESSFULLY = 0,\r\n   ERROR = 1,\r\n   CAPTCHA = 10\r\n}\r\n\r\ntype GeneralResponseT = {\r\n   resultCode: RESULT_CODE\r\n   messages: string[]\r\n   data: any\r\n}\r\n\r\ntype MeResponseT = {\r\n   data: { id: number, email: string, login: string }\r\n   resultCode: number\r\n   messages: string[]\r\n}\r\n\r\ntype ProfileResponseT = {\r\n   aboutMe: string\r\n\r\n   contacts: {\r\n      facebook: string\r\n      website: string\r\n      vk: string\r\n      twitter: string\r\n      instagram: string\r\n      youtube: string\r\n      github: string\r\n      mainLink: string\r\n   }\r\n\r\n   lookingForAJob: boolean\r\n   lookingForAJobDescription: string\r\n   fullName: string\r\n   userId: number\r\n\r\n   photos: {\r\n      small: string\r\n      large: string\r\n   }\r\n}\r\n\r\ntype UsersResponseT = {\r\n   items: {\r\n      name: string\r\n      id: number\r\n      photos: { small: string, large: string }\r\n      status: string\r\n      followed: boolean\r\n   }[]\r\n   totalCount: number\r\n   error: string\r\n}\r\n\r\ntype PhotoResponseT = {\r\n   resultCode: RESULT_CODE\r\n   messages: string[]\r\n   data: { small: string, large: string }\r\n}\r\n\r\ntype LoginResponseT = {\r\n   resultCode: RESULT_CODE\r\n   messages: string[]\r\n   data: { userId: number }\r\n}\r\n\r\ntype CaptchaResponseT = {\r\n   url: string\r\n}\r\n\r\n\r\nconst instance = axios.create({\r\n   withCredentials: true,\r\n   baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n   headers: {\r\n      'API-KEY': 'd06a70e9-4231-4a4c-92e9-77b0013b9776'\r\n   }\r\n})\r\n\r\nexport const usersAPI = {\r\n   getUsers(currentPage: number, pageSize: number) {\r\n      return instance.get<UsersResponseT>(`users?page=${currentPage}&count=${pageSize}`)\r\n         .then(response => response.data)\r\n   },\r\n   followUser(id: number) {\r\n      return instance.post<GeneralResponseT>(`follow/${id}`)\r\n         .then(response => response.data)\r\n   },\r\n   unFollow(id: number) {\r\n      return instance.delete<GeneralResponseT>(`follow/${id}`)\r\n         .then(response => response.data)\r\n   }\r\n}\r\n\r\nexport const profileAPI = {\r\n   getProfile(userId: number) {\r\n      return instance.get<ProfileResponseT>(`profile/${userId}`)\r\n         .then(response => response.data)\r\n   },\r\n   getStatus(userID: number) {\r\n      return instance.get<string>(`profile/status/${userID}`)\r\n   },\r\n   updateStatus(status: string) {\r\n      return instance.put<GeneralResponseT>(`profile/status`, {status: status})\r\n   },\r\n   savePhoto(photoFile: File) {\r\n      const formData = new FormData()\r\n      formData.append('image', photoFile)\r\n\r\n      return instance.put<PhotoResponseT>(`profile/photo`, formData, {headers: {'Content-Type': 'multipart/form-data'}})\r\n         .then(response => response.data)\r\n   },\r\n   saveProfile(profile: ProfileEditFormType) {\r\n      return instance.put<GeneralResponseT>(`profile`, profile)\r\n   }\r\n}\r\n\r\n\r\nexport const authAPI = {\r\n   getUserData() {\r\n      return instance.get<MeResponseT>(`auth/me`)\r\n         .then(response => response.data)\r\n   },\r\n   login(date: FormDataType) {\r\n      return instance.post<LoginResponseT>(`auth/login`, {...date})\r\n         .then(response => response.data)\r\n   },\r\n   logout() {\r\n      return instance.delete<GeneralResponseT>(`auth/login`)\r\n   }\r\n}\r\n\r\nexport const securityApi = {\r\n   getCaptchaUrl() {\r\n      return instance.get<CaptchaResponseT>(`security/get-captcha-url`)\r\n   }\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"music_wrap__3GvyV\",\"song\":\"music_song__2qlFZ\",\"searchResult\":\"music_searchResult__2haKc\",\"trackTitle\":\"music_trackTitle__13dJl\",\"descWrap\":\"music_descWrap__3VjpZ\",\"trackArtist\":\"music_trackArtist__1n2Hq\",\"noTracks\":\"music_noTracks__l9t3E\",\"lyrics\":\"music_lyrics__1skV-\",\"notFound\":\"music_notFound__2dNYL\",\"player\":\"music_player__dEI9_\",\"none\":\"music_none__14DXp\",\"notSearch\":\"music_notSearch__1JPVa\",\"recommendedTracks\":\"music_recommendedTracks__2Uh0T\",\"title\":\"music_title__3-ugP\",\"container\":\"music_container__fVlP8\",\"btn\":\"music_btn__3zosP\"};","import {Dispatch} from \"redux\";\r\nimport {getUserData} from \"./auth-reducer\";\r\nimport {ThunkAction} from \"redux-thunk\";\r\nimport {AppRootStateT} from \"../redux-store\";\r\n\r\nexport enum ACTION_TYPE_APP {\r\n   SUCCESSFUL_INITIALIZATION = 'social_network/app/SUCCESSFUL_INITIALIZATION',\r\n   CATCH_ERROR = 'social_network/app/CATCH_ERROR',\r\n}\r\n\r\nexport type SeverityTooltipType = \"error\" | \"warning\" | \"info\" | \"success\"\r\n\r\nexport type AppStateType = {\r\n   initialized: boolean\r\n   catchError: {\r\n      error: boolean\r\n      messageError: string | null\r\n      severity: SeverityTooltipType\r\n   }\r\n}\r\n\r\ntype ActionType = ReturnType<typeof setInitialized> | ReturnType<typeof catchError>\r\n\r\ntype ThunkActionT = ThunkAction<void, AppRootStateT, unknown, ActionType>\r\n\r\nconst initialState: AppStateType = {\r\n   initialized: false,\r\n   catchError: {\r\n      error: false,\r\n      messageError: null,\r\n      severity: 'info'\r\n   }\r\n}\r\n\r\nexport const appReducer = (state = initialState, action: ActionType): AppStateType => {\r\n   switch (action.type) {\r\n      case ACTION_TYPE_APP.SUCCESSFUL_INITIALIZATION:\r\n         return {...state, initialized: true}\r\n\r\n      case ACTION_TYPE_APP.CATCH_ERROR:\r\n         return {\r\n            ...state,\r\n            catchError: {\r\n               error: action.error,\r\n               messageError: action.message,\r\n               severity: action.severity\r\n            }\r\n         }\r\n\r\n      default:\r\n         return state\r\n   }\r\n}\r\n\r\nconst setInitialized = () => ({type: ACTION_TYPE_APP.SUCCESSFUL_INITIALIZATION} as const)\r\nconst catchError = (error: boolean, message: string | null, severity: SeverityTooltipType) => ({\r\n   type: ACTION_TYPE_APP.CATCH_ERROR,\r\n   message,\r\n   severity,\r\n   error\r\n} as const)\r\n\r\nexport const initializedApp = (): ThunkActionT =>\r\n   (dispatch) => {\r\n      Promise.all([\r\n         dispatch(getUserData())\r\n      ]).then(() => dispatch(setInitialized()))\r\n   }\r\n\r\nexport const installCaughtError = (message: string, severity: SeverityTooltipType) => (dispatch: Dispatch<ActionType>) => {\r\n   dispatch(catchError(true, message, severity))\r\n\r\n   setTimeout(() => dispatch(catchError(false, null, \"info\")), 2000)\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"btn_btn__14KbD\",\"line\":\"btn_line__17Zpm\",\"lineTop\":\"btn_lineTop__1njMw\",\"lineBottom\":\"btn_lineBottom__2gH1t\",\"lineLeft\":\"btn_lineLeft__2T8nO\",\"lineRight\":\"btn_lineRight__kmlVt\"};","import {Dispatch} from \"redux\";\r\nimport {v1} from \"uuid\";\r\nimport {profileAPI, RESULT_CODE} from \"../../api/api\";\r\nimport {AppRootStateT} from \"../redux-store\";\r\nimport {installCaughtError} from \"./app-reducer\";\r\nimport {restoreState, saveState} from \"./localStorage/localStorage\";\r\nimport {ThunkAction} from \"redux-thunk\";\r\n\r\nexport enum ACTION_TYPE_PROFILE {\r\n   ADD_POST = 'social_network/profile/ADD_POST',\r\n   UPDATE_NEW_POST = 'social_network/profile/UPDATE_NEW_POST',\r\n   SET_USER_PROFILE = 'social_network/profile/SET_USER_PROFILE',\r\n   SET_STATUS = 'social_network/profile/SET_STATUS',\r\n   SAVE_PHOTO = 'social_network/profile/SAVE_PHOTO',\r\n   SET_LIKE = 'social_network/profile/SET_LIKE',\r\n   DELETE_POST = 'social_network/profile/DELETE_POST',\r\n   GET_USER_POST = 'social_network/profile/GET_USER_POST',\r\n}\r\n\r\ntype ActionType = ReturnType<typeof addPostAC>\r\n   | ReturnType<typeof changeTextAC>\r\n   | ReturnType<typeof setUserProfileAC>\r\n   | ReturnType<typeof setStatusAC>\r\n   | ReturnType<typeof savePhotoSuccess>\r\n   | ReturnType<typeof setLike>\r\n   | ReturnType<typeof deletePost>\r\n   | ReturnType<typeof getUserPost>\r\n\r\ntype ThunkActionT = ThunkAction<void, AppRootStateT, unknown, ActionType>\r\n\r\nexport type ProfileEditFormType = {\r\n   aboutMe: string\r\n   fullName: string\r\n   lookingForAJob: boolean\r\n   lookingForAJobDescription: string\r\n   contacts: {\r\n      github: string\r\n      vk: string\r\n      facebook: string\r\n      instagram: string\r\n      twitter: string\r\n      website: string\r\n      youtube: string\r\n      mainLink: string\r\n   }\r\n}\r\n\r\nexport type ProfilePageType = {\r\n   posts: PostsType[] | []\r\n   newPostText: string\r\n   profile: null | ProfileType\r\n   status: string\r\n}\r\ntype PostsType = {\r\n   id: string\r\n   message: string\r\n   likesCount: number\r\n}\r\n\r\nexport type ContactsType = {\r\n   facebook: string\r\n   github: string\r\n   instagram: string\r\n   mainLink: string\r\n   twitter: string\r\n   vk: string\r\n   website: string\r\n   youtube: string\r\n}\r\n\r\nexport type PhotoType = {\r\n   small: string | null\r\n   large: string | null\r\n}\r\n\r\nexport type ProfileType = {\r\n   aboutMe: string\r\n   contacts: ContactsType\r\n   fullName: string\r\n   lookingForAJob: boolean\r\n   lookingForAJobDescription: string\r\n   photos: PhotoType\r\n   userId: number\r\n}\r\n\r\n\r\nconst initialState: ProfilePageType = {\r\n   profile: null,\r\n   posts: [],\r\n   newPostText: '',\r\n   status: ''\r\n}\r\n\r\nexport const profileReducer = (state = initialState, action: ActionType): ProfilePageType => {\r\n   switch (action.type) {\r\n      case ACTION_TYPE_PROFILE.ADD_POST: {\r\n         const stateCopy = {\r\n            ...state,\r\n            newPostText: '',\r\n            posts: [{\r\n               id: v1(),\r\n               message: state.newPostText,\r\n               likesCount: 0,\r\n            }, ...state.posts]\r\n         }\r\n\r\n         saveState<PostsType[]>(`userPosts:${stateCopy.profile?.userId}`, [...stateCopy.posts])\r\n\r\n         return stateCopy\r\n      }\r\n\r\n      case ACTION_TYPE_PROFILE.UPDATE_NEW_POST:\r\n         return {...state, newPostText: action.newText}\r\n\r\n      case ACTION_TYPE_PROFILE.SET_USER_PROFILE:\r\n         return {...state, profile: action.profile}\r\n\r\n      case ACTION_TYPE_PROFILE.SET_STATUS:\r\n         return {...state, status: action.status}\r\n\r\n      case ACTION_TYPE_PROFILE.SAVE_PHOTO:\r\n         return {...state, profile: state.profile && {...state.profile, ...action.photos}}\r\n\r\n      case ACTION_TYPE_PROFILE.SET_LIKE: {\r\n         const stateCopy = {\r\n            ...state,\r\n            posts: state.posts.map(p => p.id === action.id ? {...p, likesCount: action.like} : p)\r\n         }\r\n\r\n         saveState<PostsType[]>(`userPosts:${stateCopy.profile?.userId}`, [...stateCopy.posts])\r\n\r\n         return stateCopy\r\n      }\r\n\r\n      case ACTION_TYPE_PROFILE.GET_USER_POST:\r\n         return {...state, posts: action.post}\r\n\r\n      case ACTION_TYPE_PROFILE.DELETE_POST: {\r\n         const stateCopy = {...state, posts: state.posts.filter(p => p.id !== action.id)}\r\n\r\n         saveState<PostsType[]>(`userPosts:${stateCopy.profile?.userId}`, [...stateCopy.posts])\r\n\r\n         return stateCopy\r\n      }\r\n\r\n      default:\r\n         return state\r\n   }\r\n}\r\n\r\nexport const addPostAC = () => {\r\n   return {\r\n      type: ACTION_TYPE_PROFILE.ADD_POST\r\n   } as const\r\n}\r\n\r\nexport const getUserPost = (post: PostsType[]) => {\r\n   return {\r\n      type: ACTION_TYPE_PROFILE.GET_USER_POST,\r\n      post\r\n   } as const\r\n}\r\n\r\nexport const changeTextAC = (newText: string) => {\r\n   return {\r\n      type: ACTION_TYPE_PROFILE.UPDATE_NEW_POST,\r\n      newText: newText\r\n   } as const\r\n}\r\n\r\nexport const setUserProfileAC = (profile: ProfileType) => {\r\n   return {\r\n      type: ACTION_TYPE_PROFILE.SET_USER_PROFILE,\r\n      profile\r\n   } as const\r\n}\r\n\r\nexport const setStatusAC = (status: string) => {\r\n   return {\r\n      type: ACTION_TYPE_PROFILE.SET_STATUS,\r\n      status\r\n   } as const\r\n}\r\n\r\nexport const savePhotoSuccess = (photos: PhotoType) => {\r\n   return {\r\n      type: ACTION_TYPE_PROFILE.SAVE_PHOTO,\r\n      photos\r\n   } as const\r\n}\r\nexport const setLike = (like: number, id: string) => {\r\n   return {\r\n      type: ACTION_TYPE_PROFILE.SET_LIKE,\r\n      like,\r\n      id\r\n   } as const\r\n}\r\n\r\nexport const deletePost = (id: string) => {\r\n   return {\r\n      type: ACTION_TYPE_PROFILE.DELETE_POST,\r\n      id\r\n   } as const\r\n}\r\n\r\nexport const setLikeSuccess = (like: number, id: string) => (dispatch: Dispatch<ActionType>) => {\r\n   dispatch(setLike(like, id))\r\n}\r\n\r\nexport const deletePostSuccess = (id: string) => (dispatch: Dispatch<ActionType>) => {\r\n   dispatch(deletePost(id))\r\n}\r\n\r\nexport const setUserProfile = (id: number) => {\r\n   return async (dispatch: Dispatch<ActionType>) => {\r\n      const data = await profileAPI.getProfile(id)\r\n\r\n      dispatch(setUserProfileAC(data))\r\n      dispatch(getUserPost(restoreState<PostsType[]>(`userPosts:${id}`, [])))\r\n   }\r\n}\r\n\r\nexport const getStatus = (id: number) => (dispatch: Dispatch<ActionType>) => {\r\n   profileAPI.getStatus(id)\r\n      .then(response => {\r\n         dispatch(setStatusAC(response.data))\r\n      })\r\n}\r\n\r\nexport const updateStatus = (status: string): ThunkActionT => (dispatch) => {\r\n   profileAPI.updateStatus(status)\r\n      .then(response => {\r\n         response.data.resultCode === RESULT_CODE.SUCCESSFULLY && dispatch(setStatusAC(status))\r\n         response.data.resultCode !== RESULT_CODE.SUCCESSFULLY && dispatch(installCaughtError(response.data.messages[0], 'warning'))\r\n      })\r\n}\r\n\r\nexport const savePhoto = (file: File): ThunkActionT => async (dispatch) => {\r\n   const response = await profileAPI.savePhoto(file)\r\n\r\n   response.resultCode === RESULT_CODE.SUCCESSFULLY && dispatch(savePhotoSuccess(response.data))\r\n   response.resultCode !== RESULT_CODE.SUCCESSFULLY && dispatch(installCaughtError(response.messages[0], 'warning'))\r\n}\r\n\r\nexport const saveProfile = (profile: ProfileEditFormType): ThunkActionT => async (dispatch, getState) => {\r\n   const userId = getState().auth.userData?.id\r\n   const response = await profileAPI.saveProfile(profile)\r\n\r\n   response.data.resultCode === RESULT_CODE.SUCCESSFULLY && userId && await dispatch(setUserProfile(userId))\r\n   response.data.resultCode !== RESULT_CODE.SUCCESSFULLY && dispatch(installCaughtError(response.data.messages[0], 'warning'))\r\n}\r\n","// вот вам функция для сохранения объектов в память браузера\n// (данные в этом хранилище сохраняться даже при перезагрузке компа):\nexport function saveState<T>(key: string, state: T) {\n   const stateAsString = JSON.stringify(state)\n   localStorage.setItem(key, stateAsString)\n}\n\n// и вот вам функция для получения сохранённого объекта в памяти браузера:\nexport function restoreState<T>(key: string, defaultState: T) {\n   let state = defaultState\n   const stateAsString = localStorage.getItem(key)\n   if (stateAsString !== null) state = JSON.parse(stateAsString) as T\n   return state\n}\n\n","import {v1} from \"uuid\";\r\n\r\nenum ACTION_TYPE_DIALOGS {\r\n   ADD_MESSAGE = 'ADD_MESSAGE',\r\n   UPDATE_NEW_MESSAGE = 'UPDATE_NEW_MESSAGE'\r\n}\r\n\r\ntype ActionType = ReturnType<typeof changeMessageAC> | ReturnType<typeof addMessageAC>\r\n\r\nexport type DialogsPageType = {\r\n   dialogs: Array<DialogsType>\r\n   messages: Array<MessagesType>\r\n   newMessage: string\r\n}\r\ntype DialogsType = {\r\n   id: string\r\n   name: string\r\n}\r\ntype MessagesType = {\r\n   id: string\r\n   message: string\r\n}\r\n\r\nconst initialState: DialogsPageType = {\r\n   dialogs: [\r\n      {id: v1(), name: 'Name1'},\r\n   ],\r\n   messages: [\r\n      {id: v1(), message: 'lorem Yo1'},\r\n   ],\r\n   newMessage: ''\r\n}\r\n\r\nexport const dialogReducer = (state = initialState, action: ActionType): DialogsPageType => {\r\n   switch (action.type) {\r\n      case ACTION_TYPE_DIALOGS.UPDATE_NEW_MESSAGE:\r\n\r\n         return {...state, newMessage: action.newMessage}\r\n\r\n      case ACTION_TYPE_DIALOGS.ADD_MESSAGE:\r\n         const newMess = {id: v1(), message: state.newMessage}\r\n\r\n         return {...state, messages: [...state.messages, newMess], newMessage: ''}\r\n\r\n      default:\r\n         return {...state}\r\n   }\r\n}\r\n\r\nexport const changeMessageAC = (newMessage: string) => {\r\n   return {\r\n      type: ACTION_TYPE_DIALOGS.UPDATE_NEW_MESSAGE,\r\n      newMessage: newMessage\r\n   } as const\r\n}\r\n\r\nexport const addMessageAC = () => {\r\n   return {\r\n      type: ACTION_TYPE_DIALOGS.ADD_MESSAGE,\r\n   } as const\r\n}\r\n","import React, {useState} from \"react\";\r\nimport style from './burger.module.scss'\r\n\r\ntype ButtonBurgerPropsT = {\r\n   toggleOpenMenu: () => void\r\n}\r\n\r\nexport const ButtonBurger: React.FC<ButtonBurgerPropsT> = (props) => {\r\n   const [open, setOpen] = useState(true)\r\n\r\n   const finalClassName = open ? `${style.header__burger} ${style.open}` : style.header__burger\r\n\r\n   const onClickHandler = () => {\r\n      setOpen(state => !state)\r\n      props.toggleOpenMenu()\r\n   }\r\n\r\n   return (\r\n      <button onClick={onClickHandler} className={finalClassName}>\r\n         <span className={style.header__line}> </span>\r\n         <span className={style.header__line}> </span>\r\n         <span className={style.header__line}> </span>\r\n      </button>\r\n   )\r\n}","import React, {useEffect, useState} from \"react\"\r\nimport {useSelector} from \"react-redux\";\r\nimport {AppRootStateT} from \"../../redux/redux-store\";\r\nimport {UserDataType} from \"../../redux/reducer/auth-reducer\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {Layout, Menu} from \"antd\";\r\nimport {CommentOutlined, CustomerServiceOutlined, ProfileOutlined, UserOutlined} from \"@ant-design/icons\";\r\nimport {ButtonBurger} from \"../common/ButtonBurger/ButtonBurger\";\r\nimport s from './Sidebar.module.scss'\r\nimport {PATH} from \"../../Router/Routes\";\r\n\r\nexport const Sidebar = () => {\r\n   const authorizedUser = useSelector<AppRootStateT, UserDataType | null>(state => state.auth.userData)\r\n   const [collapsed, setCollapsed] = useState<boolean>(false)\r\n   const [scrollDistance, setScrollDistance] = useState<boolean>(false)\r\n\r\n   const onClickHandler = () => setCollapsed(state => !state)\r\n\r\n   const listenerScroll = () => {\r\n      let scrollDistance = window.scrollY\r\n      scrollDistance > 80 ? setScrollDistance(true) : setScrollDistance(false)\r\n   }\r\n   const listenerResize = () => {\r\n      if (window.innerWidth < 750) setCollapsed(state => false)\r\n   }\r\n\r\n   const fixedSideBarClassName = collapsed\r\n      ? `${s.fixedSideBar} ${scrollDistance ? s.fixed : ''}`\r\n      : `${s.fixedSideBar} ${s.open} ${scrollDistance ? s.fixed : ''}`\r\n\r\n\r\n   useEffect(() => {\r\n      window.addEventListener('scroll', listenerScroll)\r\n      window.addEventListener('resize', listenerResize)\r\n\r\n      return () => {\r\n         window.removeEventListener('scroll', listenerScroll)\r\n         window.removeEventListener('resize', listenerResize)\r\n      }\r\n   }, [])\r\n\r\n   return (\r\n      <Layout.Sider\r\n         trigger={null}\r\n         collapsible\r\n         className={collapsed ? s.layoutHidden : `${s.layoutHidden} ${s.open}`}\r\n         collapsed={collapsed}\r\n         onCollapse={onClickHandler}>\r\n         <div className={fixedSideBarClassName}>\r\n            <div className={collapsed ? s.sideBarTrigger : `${s.sideBarTrigger} ${s.open}`}>\r\n               <ButtonBurger toggleOpenMenu={onClickHandler}/>\r\n            </div>\r\n            <Menu theme=\"dark\" mode=\"inline\">\r\n               <Menu.Item key=\"1\" icon={<ProfileOutlined/>}>\r\n                  <Link to={authorizedUser ? `/Social_Network/profile/${authorizedUser.id}` : PATH.HOME}>Profile</Link>\r\n               </Menu.Item>\r\n\r\n               <Menu.Item key=\"2\" icon={<UserOutlined/>}>\r\n                  <Link to={PATH.USERS}>Users</Link>\r\n               </Menu.Item>\r\n\r\n               <Menu.Item key=\"3\" icon={<CommentOutlined/>}>\r\n                  <Link to={PATH.CHAT}>General Chat</Link>\r\n               </Menu.Item>\r\n\r\n               <Menu.Item key=\"4\" icon={<CustomerServiceOutlined/>}>\r\n                  <Link to={PATH.SPOTIFY_MUSIC}>Spotify Music</Link>\r\n               </Menu.Item>\r\n            </Menu>\r\n         </div>\r\n      </Layout.Sider>\r\n   )\r\n}","import {Button, makeStyles} from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport s from './Header.module.scss'\r\nimport {Avatar, Layout} from \"antd\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AuthStateType, logout} from \"../../redux/reducer/auth-reducer\";\r\nimport {AppRootStateT} from \"../../redux/redux-store\";\r\nimport {PhotoType} from \"../../redux/reducer/profile-reducer\";\r\nimport {PATH} from \"../../Router/Routes\";\r\n\r\n\r\nexport const Header: React.FC = () => {\r\n   const navigate = useNavigate()\r\n\r\n   const dispatch = useDispatch()\r\n\r\n   const authDate = useSelector<AppRootStateT, AuthStateType>(state => state.auth)\r\n\r\n   const avatar = useSelector<AppRootStateT, PhotoType | null>(state => state.auth.photo)\r\n\r\n   const onClickHandlerLogout = () => {\r\n\r\n      dispatch(logout())\r\n\r\n      setTimeout(() => navigate(PATH.HOME), 100)\r\n   }\r\n\r\n   const onClickHandlerLogin = () => navigate(PATH.LOGIN)\r\n\r\n   const style = makeStyles(() => ({\r\n      default: {\r\n         marginLeft: '20px',\r\n         fontFamily: `Mochiy Pop P One, sans-serif`\r\n      }\r\n   }))\r\n\r\n   return (\r\n      <Layout.Header className={s.header}>\r\n         <Avatar src={avatar?.small} size={'large'}/>\r\n\r\n         {authDate.userData?.login\r\n            ? <div className={s.loginBlock}>\r\n               Welcome {authDate.userData?.login}\r\n               <Button\r\n                  className={style().default}\r\n                  onClick={onClickHandlerLogout}\r\n                  variant={\"contained\"}\r\n                  color=\"primary\">Logout</Button>\r\n            </div>\r\n            : <div className={s.loginBlock}>\r\n               <Button\r\n                  className={style().default}\r\n                  onClick={onClickHandlerLogin}\r\n                  variant={\"contained\"}\r\n                  color=\"primary\">Login</Button>\r\n            </div>}\r\n      </Layout.Header>\r\n   )\r\n}\r\n\r\n","import React, {useEffect, useCallback, FC} from 'react';\nimport {BrowserRouter, HashRouter} from \"react-router-dom\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {AppRootStateT} from \"./redux/redux-store\";\nimport {Preloader} from \"./components/common/Preloader/Preloader\";\nimport {AppStateType, initializedApp, installCaughtError} from \"./redux/reducer/app-reducer\";\nimport {Tooltip} from \"./components/common/Tooltip/Tooltip\";\nimport 'antd/dist/antd.css';\nimport {Layout} from 'antd';\nimport {Routers} from \"./Router/Routes\";\nimport {Sidebar} from \"./components/Sidebar/Sidebar\";\nimport s from './App.module.scss'\nimport {Header} from \"./components/Header/Header\";\n\nconst App: FC = () => {\n   const {initialized, catchError} = useSelector<AppRootStateT, AppStateType>(state => state.app)\n\n   const dispatch = useDispatch()\n\n   const {Content, Footer,} = Layout;\n\n   const catchUnhandledRejection = useCallback((e: PromiseRejectionEvent) => {\n      dispatch(installCaughtError(e.reason.message, 'error'))\n   }, [dispatch])\n\n   useEffect(() => {\n      dispatch(initializedApp())\n   }, [dispatch])\n\n   useEffect(() => {\n      window.addEventListener('unhandledrejection', catchUnhandledRejection)\n\n      return () => {\n         window.removeEventListener('unhandledrejection', catchUnhandledRejection)\n      }\n   }, [catchUnhandledRejection])\n\n   if (!initialized) {\n      return <Preloader/>\n   }\n\n   return (\n      <BrowserRouter>\n         <Layout>\n            <Header/>\n            <Layout className={s.layoutSider} style={{minHeight: '100vh', margin: '15px 0 0 0'}}>\n               <Sidebar/>\n               <Layout className={s.siteLayout}>\n                  <Content className={s.content}>\n                     <Routers/>\n                  </Content>\n                  <Footer className={s.footer}>Small Developer ©2021 Created by Mr. Nobody</Footer>\n               </Layout>\n            </Layout>\n         </Layout>\n\n         {catchError.error &&\n         <Tooltip\n            messages={catchError.messageError}\n            severity={catchError.severity} open={catchError.error}\n            anchorOrigin={{vertical: 'top', horizontal: 'center'}}/>}\n      </BrowserRouter>\n   )\n}\n\nexport default App","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {applyMiddleware, combineReducers, compose, createStore} from \"redux\";\r\nimport {profileReducer} from \"./reducer/profile-reducer\";\r\nimport {dialogReducer} from \"./reducer/dialog-reducer\";\r\nimport {usersReducer} from \"./reducer/users-reducer\";\r\nimport {authReducer} from \"./reducer/auth-reducer\";\r\nimport thunk from 'redux-thunk'\r\nimport {appReducer} from \"./reducer/app-reducer\";\r\nimport {chatReducer} from \"./reducer/chat-reducer\";\r\nimport {spotifyReducer} from \"./reducer/spotify-reducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n   profilePage: profileReducer,\r\n   dialogsPage: dialogReducer,\r\n   usersPage: usersReducer,\r\n   auth: authReducer,\r\n   app: appReducer,\r\n   chat: chatReducer,\r\n   spotify: spotifyReducer\r\n})\r\n\r\nexport type AppRootStateT = ReturnType<typeof rootReducer>\r\n\r\n// @ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {store} from './redux/redux-store';\nimport {Provider} from \"react-redux\";\n\n\nReactDOM.render(\n   <Provider store={store}>\n      <App/>\n   </Provider>,\n   document.getElementById('root')\n)\n\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileWrap\":\"ProfileInfo_profileWrap__dTJBM\",\"profileBackground\":\"ProfileInfo_profileBackground__ennnz\",\"profileAvatar\":\"ProfileInfo_profileAvatar__2juhR\",\"profileContactList\":\"ProfileInfo_profileContactList__1YKd3\",\"profileContact\":\"ProfileInfo_profileContact__k4A-4\",\"profileContactItem\":\"ProfileInfo_profileContactItem__ocOqk\",\"profileDesc\":\"ProfileInfo_profileDesc__1IYgn\",\"defaultLink\":\"ProfileInfo_defaultLink__1v5m4\",\"linkFacebook\":\"ProfileInfo_linkFacebook__14jZt\",\"linkWebsite\":\"ProfileInfo_linkWebsite__3ZEKu\",\"linkVk\":\"ProfileInfo_linkVk__3M-h5\",\"linkTwitter\":\"ProfileInfo_linkTwitter__3xy-Q\",\"linkInstagram\":\"ProfileInfo_linkInstagram__1XgjA\",\"linkYoutube\":\"ProfileInfo_linkYoutube__37Z6e\",\"linkGithub\":\"ProfileInfo_linkGithub__2067l\",\"linkMainLink\":\"ProfileInfo_linkMainLink__2_TSX\",\"linkNone\":\"ProfileInfo_linkNone__1aNb8\",\"contactTitle\":\"ProfileInfo_contactTitle__3UIBW\",\"profileContent\":\"ProfileInfo_profileContent__u70Mt\",\"profileAbout\":\"ProfileInfo_profileAbout__LjydU\",\"profileInfo\":\"ProfileInfo_profileInfo__3PGLA\",\"aboutMe\":\"ProfileInfo_aboutMe__1eWMg\",\"fullName\":\"ProfileInfo_fullName__34vME\",\"lookingForAJob\":\"ProfileInfo_lookingForAJob__BcGjc\",\"lookingForAJobDescription\":\"ProfileInfo_lookingForAJobDescription__2vdIb\",\"spanDefault\":\"ProfileInfo_spanDefault__3gNJL\",\"statusUser\":\"ProfileInfo_statusUser__2x86m\",\"status\":\"ProfileInfo_status__1-LgD\",\"editBlock\":\"ProfileInfo_editBlock__2SKFF\",\"profileEditForm\":\"ProfileInfo_profileEditForm__31ihJ\",\"profileEditWrap\":\"ProfileInfo_profileEditWrap__1zY0s\",\"profileEditInfo\":\"ProfileInfo_profileEditInfo__2769m\",\"profileEditContact\":\"ProfileInfo_profileEditContact__2GGj0\",\"profileEditContactWrap\":\"ProfileInfo_profileEditContactWrap__1IOec\",\"profileEditContactLeft\":\"ProfileInfo_profileEditContactLeft__2VnPo\",\"profileEditContactRight\":\"ProfileInfo_profileEditContactRight__1RIo7\",\"profileEditContactDesc\":\"ProfileInfo_profileEditContactDesc__2MsaY\",\"profileEditInfoDesc\":\"ProfileInfo_profileEditInfoDesc__RNUV4\",\"contactsWrap\":\"ProfileInfo_contactsWrap__aw9L5\",\"flexLeft\":\"ProfileInfo_flexLeft__sRbrb\"};","import {ThunkAction} from \"redux-thunk\";\r\nimport {spotifyAPI} from \"../../api/spotify-api\";\r\nimport {AppRootStateT} from \"../redux-store\";\r\nimport {installCaughtError} from \"./app-reducer\";\r\n\r\nexport enum ACTION_TYPE_SPOTIFY {\r\n   SET_TOKEN_INFO = 'social_network/spotify/SET_ACCESS_TOKEN',\r\n   REFRESH_TOKEN_INFO = 'social_network/spotify/REFRESH_TOKEN_INFO',\r\n   SET_CHOOSE_TRACK = 'social_network/spotify/SET_CHOOSE_TRACK',\r\n   SET_LYRICS = 'social_network/spotify/SET_LYRICS',\r\n   SET_IS_FETCHING = 'social_network/spotify/SET_IS_FETCHING',\r\n   SET_SEARCH_RESULTS = 'social_network/spotify/SET_SEARCH_RESULTS',\r\n   SET_SEARCH = 'social_network/spotify/SET_SEARCH',\r\n   SET_RECOMMENDED_TRACKS = 'social_network/spotify/SET_RANDOM_PLAYLIST',\r\n   SET_AUTH = 'social_network/spotify/SET_AUTH',\r\n}\r\n\r\nexport type SearchResultsT = {\r\n   artist: string\r\n   title: string\r\n   uri: string\r\n   albumUrl: string\r\n}\r\n\r\nexport type TokenT = {\r\n   accessToken: string\r\n   refreshToken: string\r\n   expiresIn: number\r\n}\r\n\r\ntype DashboardT = {\r\n   search: string\r\n   lyrics: string\r\n   searchResults: SearchResultsT[]\r\n   playingTrack: SearchResultsT | null\r\n}\r\n\r\nexport type spotifyStateT = {\r\n   token: TokenT\r\n   dashboard: DashboardT\r\n   recommendedTracks: SearchResultsT[]\r\n   isFetching: boolean\r\n   isAuth: boolean\r\n}\r\n\r\ntype ActionT = ReturnType<typeof setTokenInfo>\r\n   | ReturnType<typeof refreshTokenInfo>\r\n   | ReturnType<typeof chooseTrack>\r\n   | ReturnType<typeof setLyrics>\r\n   | ReturnType<typeof setLoadingData>\r\n   | ReturnType<typeof setSearchResults>\r\n   | ReturnType<typeof setSearch>\r\n   | ReturnType<typeof setRecommendedTracks>\r\n   | ReturnType<typeof setIsAuth>\r\n\r\ntype ThunkActionT = ThunkAction<void, AppRootStateT, unknown, ActionT>\r\n\r\nconst initialState: spotifyStateT = {\r\n   token: {\r\n      accessToken: '',\r\n      refreshToken: '',\r\n      expiresIn: 0,\r\n   },\r\n   dashboard: {\r\n      search: '',\r\n      lyrics: '',\r\n      searchResults: [],\r\n      playingTrack: null\r\n   },\r\n   recommendedTracks: [],\r\n   isFetching: false,\r\n   isAuth: false\r\n}\r\n\r\n\r\nexport const spotifyReducer = (state = initialState, action: ActionT): spotifyStateT => {\r\n   switch (action.type) {\r\n      case ACTION_TYPE_SPOTIFY.SET_IS_FETCHING:\r\n         return {...state, isFetching: action.isFetching}\r\n\r\n      case ACTION_TYPE_SPOTIFY.SET_TOKEN_INFO:\r\n         return {...state, token: action.token}\r\n\r\n      case ACTION_TYPE_SPOTIFY.REFRESH_TOKEN_INFO:\r\n         return {...state, token: {...state.token, ...action.token}}\r\n\r\n      case ACTION_TYPE_SPOTIFY.SET_LYRICS:\r\n         return {...state, dashboard: {...state.dashboard, lyrics: action.lyrics}}\r\n\r\n      case ACTION_TYPE_SPOTIFY.SET_SEARCH:\r\n         return {...state, dashboard: {...state.dashboard, search: action.search}}\r\n\r\n      case ACTION_TYPE_SPOTIFY.SET_CHOOSE_TRACK:\r\n         return {\r\n            ...state,\r\n            dashboard: {\r\n               ...state.dashboard,\r\n               playingTrack: action.track,\r\n               search: '',\r\n               lyrics: ''\r\n            }\r\n         }\r\n\r\n      case ACTION_TYPE_SPOTIFY.SET_SEARCH_RESULTS:\r\n         return {\r\n            ...state,\r\n            dashboard: {\r\n               ...state.dashboard,\r\n               searchResults: action.searchResults\r\n            }\r\n         }\r\n\r\n      case ACTION_TYPE_SPOTIFY.SET_RECOMMENDED_TRACKS:\r\n         return {...state, recommendedTracks: action.playlist}\r\n\r\n      case ACTION_TYPE_SPOTIFY.SET_AUTH:\r\n         return {...state, isAuth: action.auth}\r\n\r\n      default:\r\n         return state\r\n   }\r\n}\r\n\r\nconst setTokenInfo = (token: TokenT) => ({\r\n   type: ACTION_TYPE_SPOTIFY.SET_TOKEN_INFO, token\r\n} as const)\r\n\r\nconst setIsAuth = (auth: boolean) => ({\r\n   type: ACTION_TYPE_SPOTIFY.SET_AUTH, auth\r\n} as const)\r\n\r\nconst refreshTokenInfo = (token: { refreshToken: string, expiresIn: number }) => ({\r\n   type: ACTION_TYPE_SPOTIFY.REFRESH_TOKEN_INFO,\r\n   token\r\n} as const)\r\n\r\nconst chooseTrack = (track: SearchResultsT) => ({\r\n   type: ACTION_TYPE_SPOTIFY.SET_CHOOSE_TRACK,\r\n   track\r\n} as const)\r\n\r\nconst setLyrics = (lyrics: string) => ({\r\n   type: ACTION_TYPE_SPOTIFY.SET_LYRICS,\r\n   lyrics\r\n} as const)\r\n\r\nexport const setSearchResults = (searchResults: SearchResultsT[]) => ({\r\n   type: ACTION_TYPE_SPOTIFY.SET_SEARCH_RESULTS,\r\n   searchResults\r\n} as const)\r\n\r\nconst setRecommendedTracks = (playlist: SearchResultsT[]) => ({\r\n   type: ACTION_TYPE_SPOTIFY.SET_RECOMMENDED_TRACKS,\r\n   playlist\r\n} as const)\r\n\r\n\r\nconst setLoadingData = (isFetching: boolean) => ({type: ACTION_TYPE_SPOTIFY.SET_IS_FETCHING, isFetching} as const)\r\nexport const setSearch = (search: string) => ({type: ACTION_TYPE_SPOTIFY.SET_SEARCH, search} as const)\r\n\r\nexport const loginTokenSpotify = (code: string): ThunkActionT =>\r\n   async (dispatch) => {\r\n      try {\r\n         dispatch(setLoadingData(true))\r\n\r\n         const response = await spotifyAPI.loginToken(code)\r\n\r\n         dispatch(setTokenInfo(response))\r\n\r\n         dispatch(setIsAuth(true))\r\n\r\n         dispatch(setLoadingData(false))\r\n      } catch (error) {\r\n         error instanceof Error && dispatch(installCaughtError(error.message, 'error'))\r\n         dispatch(setLoadingData(false))\r\n      }\r\n   }\r\n\r\nexport const refreshTokenSpotify = (token: string): ThunkActionT =>\r\n   async (dispatch) => {\r\n      try {\r\n         dispatch(setLoadingData(true))\r\n\r\n         const response = await spotifyAPI.refreshToken(token)\r\n\r\n         dispatch(refreshTokenInfo(response))\r\n\r\n         dispatch(setLoadingData(false))\r\n      } catch (error) {\r\n         error instanceof Error && dispatch(installCaughtError(error.message, 'error'))\r\n         dispatch(setLoadingData(false))\r\n      }\r\n   }\r\n\r\nexport const setChooseTrack = (track: SearchResultsT): ThunkActionT =>\r\n   (dispatch) => {\r\n      dispatch(chooseTrack(track))\r\n   }\r\n\r\nexport const setLyricsOfPlayingSong = (title: string, artist: string): ThunkActionT =>\r\n   async (dispatch) => {\r\n      try {\r\n         dispatch(setLoadingData(true))\r\n\r\n         const response = await spotifyAPI.getLyrics(title, artist)\r\n\r\n         dispatch(setLyrics(response.lyrics))\r\n\r\n         dispatch(setLoadingData(false))\r\n      } catch (error) {\r\n         error instanceof Error && dispatch(installCaughtError(error.message, 'error'))\r\n         dispatch(setLoadingData(false))\r\n      }\r\n   }\r\n\r\nconst setTracks = (track: SpotifyApi.TrackObjectFull | SpotifyApi.TrackObjectSimplified) => {\r\n   //@ts-ignore\r\n   const smallestAlbumImage = track.album.images.reduce((smallest, image) => {\r\n         if ((image.height || 0) < (smallest.height || 0)) return image\r\n\r\n         return smallest\r\n      },\r\n      //@ts-ignore\r\n      track.album.images[0]\r\n   )\r\n\r\n   return {\r\n      artist: track.artists[0].name,\r\n      title: track.name,\r\n      uri: track.uri,\r\n      albumUrl: smallestAlbumImage.url,\r\n   }\r\n}\r\n\r\nexport const getSearchResults = (search: string, cancelSearch: boolean): ThunkActionT =>\r\n   async (dispatch) => {\r\n      try {\r\n         dispatch(setLoadingData(true))\r\n\r\n         const res = await spotifyAPI.searchTracks(search)\r\n\r\n         console.log(res)\r\n         if (cancelSearch) return\r\n\r\n         dispatch(setSearchResults(res.body.tracks ? res.body.tracks.items.map(setTracks) : []))\r\n\r\n         dispatch(setLoadingData(false))\r\n      } catch (error) {\r\n         error instanceof Error && dispatch(installCaughtError(error.message, 'error'))\r\n         dispatch(setLoadingData(false))\r\n      }\r\n   }\r\n\r\n\r\nexport const getRecommendedTracks = (): ThunkActionT =>\r\n   async (dispatch) => {\r\n      try {\r\n         dispatch(setLoadingData(true))\r\n\r\n         const res = await spotifyAPI.getRecommended()\r\n\r\n         dispatch(setRecommendedTracks(res.body.tracks ? res.body.tracks.map(setTracks) : []))\r\n\r\n         dispatch(setLoadingData(false))\r\n      } catch (error) {\r\n         error instanceof Error && dispatch(installCaughtError(error.message, 'error'))\r\n         dispatch(setLoadingData(false))\r\n      }\r\n   }","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sideBarTrigger\":\"Sidebar_sideBarTrigger__2ed9p\",\"open\":\"Sidebar_open__3wGtN\",\"fixedSideBar\":\"Sidebar_fixedSideBar__1sWle\",\"fixed\":\"Sidebar_fixed__1W3y5\",\"layoutHidden\":\"Sidebar_layoutHidden__9ERTb\"};","import React, {Suspense} from \"react\";\r\nimport {Route, Routes} from \"react-router-dom\";\r\nimport {StartPage} from \"../components/StartPage/StartPage\";\r\nimport LoginFormContainer from \"../components/Login/LoginForm\";\r\nimport {ProfileContainer} from \"../components/Profile/Profile\";\r\nimport {NotFound} from \"../components/common/NotFound/NotFound\";\r\nimport {Preloader} from \"../components/common/Preloader/Preloader\";\r\nimport {Music} from \"../components/SpotifyMusic/Music\";\r\n\r\nconst UsersContainer = React.lazy(() => import('../components/Users/UsersContainer'));\r\nconst GeneralChat = React.lazy(() => import('../components/GeneralChat/Chat'));\r\n\r\nexport enum PATH {\r\n   HOME = \"/Social_Network\",\r\n   LOGIN = '/Social_Network/login',\r\n   PROFILE_USER = '/Social_Network/profile/:userId',\r\n   CHAT = '/Social_Network/chat',\r\n   USERS = '/Social_Network/users',\r\n   SPOTIFY_MUSIC = '/Social_Network/spotifyMusic',\r\n}\r\n\r\nexport const Routers = () => {\r\n   return (\r\n      <Suspense fallback={<Preloader/>}>\r\n         <Routes>\r\n            <Route path={PATH.HOME} element={<StartPage/>}/>\r\n            <Route path={PATH.LOGIN} element={<LoginFormContainer/>}/>\r\n            <Route path={PATH.PROFILE_USER} element={<ProfileContainer/>}/>\r\n            <Route path={PATH.CHAT} element={<GeneralChat/>}/>\r\n            <Route path={PATH.USERS} element={<UsersContainer/>}/>\r\n            <Route path={PATH.SPOTIFY_MUSIC} element={<Music/>}/>\r\n            <Route path={'*'} element={<NotFound/>}/>\r\n         </Routes>\r\n      </Suspense>\r\n   )\r\n}","import React from \"react\";\r\nimport s from './btn.module.scss'\r\nimport {Link} from \"react-router-dom\";\r\n\r\n\r\ntype PropsType = {\r\n   goAnotherSite: boolean\r\n   link: string\r\n   name: string\r\n   callBack?: () => void\r\n   className?: string\r\n   style?: React.CSSProperties\r\n}\r\n\r\nexport const NeonBtn: React.FC<PropsType> = (props) => {\r\n   const {callBack, name, className, link, goAnotherSite, style} = props\r\n\r\n   const onClickHandler = () => {\r\n      callBack && callBack()\r\n   }\r\n\r\n\r\n   return (\r\n      <>{goAnotherSite\r\n         ? <a href={link}>\r\n            <button\r\n               style={style}\r\n               onClick={onClickHandler}\r\n               className={`${s.btn} ${className}`}>\r\n               <span className={`${s.line} ${s.lineTop}`}> </span>\r\n               <span className={`${s.line} ${s.lineLeft}`}> </span>\r\n               <span className={`${s.line} ${s.lineRight}`}> </span>\r\n               <span className={`${s.line} ${s.lineBottom}`}> </span>\r\n               {name}\r\n            </button>\r\n         </a>\r\n         : <Link to={link}>\r\n            <button\r\n               style={style}\r\n               onClick={onClickHandler}\r\n               className={`${s.btn} ${className}`}>\r\n               <span className={`${s.line} ${s.lineTop}`}> </span>\r\n               <span className={`${s.line} ${s.lineLeft}`}> </span>\r\n               <span className={`${s.line} ${s.lineRight}`}> </span>\r\n               <span className={`${s.line} ${s.lineBottom}`}> </span>\r\n               {name}\r\n            </button>\r\n         </Link>\r\n      }\r\n      </>\r\n   )\r\n}","export default __webpack_public_path__ + \"static/media/rocket.58833b69.png\";","import React from \"react\";\r\nimport s from './homePage.module.scss'\r\nimport {NeonBtn} from \"../common/NeonBtn/NeonBtn\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {AppRootStateT} from \"../../redux/redux-store\";\r\nimport {UserDataType} from \"../../redux/reducer/auth-reducer\";\r\nimport {Navigate} from \"react-router-dom\";\r\nimport rocket from '../../image/rocket.png'\r\nimport {PATH} from \"../../Router/Routes\";\r\n\r\nexport const StartPage: React.FC = () => {\r\n   const isAuth = useSelector<AppRootStateT, boolean>(state => state.auth.isAuth)\r\n   const isAuthSpotify = useSelector<AppRootStateT, boolean>(state => state.spotify.isAuth)\r\n   const isLogout = useSelector<AppRootStateT, boolean>(state => state.auth.logout)\r\n   const authorizedUser = useSelector<AppRootStateT, UserDataType | null>(state => state.auth.userData)\r\n\r\n   const homePage = <div className={s.wrap}>\r\n\r\n      <h1 className={s.mainTitle}>Social Network <span><img src={rocket} alt=\"rocket\"/></span></h1>\r\n\r\n      <p className={s.desc}>\r\n         Yo stranger, this is SPA a small social network, a pet project on which a juniors developer trains.\r\n      </p>\r\n      <p className={s.desc}>\r\n         To see the entire stack that I have used go to my\r\n         <a target='blank' href=\"https://github.com/MrGentelman/Social_network_React_Redux\">GitHub</a>\r\n      </p>\r\n      <div className={s.descTeh}>\r\n         <span>To test the application, register or log in!</span>\r\n         {/*<div className={s.accountCredentials}>*/}\r\n         {/*   <span>Email: free@samuraijs.com</span>*/}\r\n         {/*   <span>Password: free</span>*/}\r\n         {/*</div>*/}\r\n         <div className={s.btnGroup}>\r\n            <NeonBtn goAnotherSite={true} link={'https://social-network.samuraijs.com/signUp'} name={'Register'}/>\r\n            <NeonBtn goAnotherSite={false} link={PATH.LOGIN} name={'Login'}/>\r\n         </div>\r\n      </div>\r\n   </div>\r\n\r\n   if (isLogout) return homePage\r\n\r\n   if (isAuthSpotify) return <Navigate replace to={PATH.SPOTIFY_MUSIC}/>\r\n\r\n   if (isAuth) return <Navigate replace to={`/Social_Network/profile/${authorizedUser?.id}`}/>\r\n\r\n   return homePage\r\n}","import React, {useState} from \"react\";\r\nimport {SubmitHandler, useForm} from \"react-hook-form\";\r\nimport {\r\n   Button,\r\n   Checkbox,\r\n   Container,\r\n   FormControlLabel,\r\n   makeStyles,\r\n   TextField\r\n} from \"@material-ui/core\";\r\nimport * as yup from 'yup';\r\nimport {yupResolver} from \"@hookform/resolvers/yup\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {FormDataType, login, UserDataType} from \"../../redux/reducer/auth-reducer\";\r\nimport {AppRootStateT} from \"../../redux/redux-store\";\r\nimport {Navigate} from \"react-router-dom\";\r\nimport Snackbar from \"@mui/material/Snackbar\";\r\nimport MuiAlert from '@mui/material/Alert';\r\nimport s from './form.module.scss'\r\n\r\nexport const LoginPage: React.FC = () => {\r\n   const isAuth = useSelector<AppRootStateT, boolean>(state => state.auth.isAuth)\r\n   const authorizedUser = useSelector<AppRootStateT, UserDataType | null>(state => state.auth.userData)\r\n\r\n   if (isAuth) {\r\n      return <Navigate to={authorizedUser ? `/Social_Network/profile/${authorizedUser.id}` : '/login'}/>\r\n   }\r\n\r\n   return <LoginForm/>\r\n}\r\n\r\nconst LoginForm: React.FC = () => {\r\n   const statusMessages = useSelector<AppRootStateT, string>(state => state.auth.statusMessages)\r\n   const resultStatusMessage = useSelector<AppRootStateT, boolean>(state => state.auth.resultStatusMessage)\r\n   const captchaUrl = useSelector<AppRootStateT, string | null>(state => state.auth.captchaUrl)\r\n\r\n   const dispatch = useDispatch()\r\n\r\n   const [openTooltip, setOpenTooltip] = useState<boolean>(false)\r\n   const handleClick = () => setOpenTooltip(true)\r\n   const handleClose = () => setOpenTooltip(false)\r\n\r\n   const schema = yup.object().shape({\r\n      email: yup\r\n         .string()\r\n         .email('Email should have correct format')\r\n         .required('Email is a required field'),\r\n      password: yup\r\n         .string()\r\n         .required('Password is a required field')\r\n   })\r\n\r\n   const {register, handleSubmit, formState: {errors}} = useForm<FormDataType>({\r\n      mode: \"onBlur\",\r\n      resolver: yupResolver(schema)\r\n   });\r\n\r\n   const onSubmit: SubmitHandler<FormDataType> = (data) => dispatch(login(data))\r\n\r\n   const useStyles = makeStyles(() => ({\r\n      position: {\r\n         display: 'flex',\r\n         justifyContent: 'center',\r\n         flexDirection: 'column',\r\n         alignItems: 'center'\r\n      },\r\n      container: {\r\n         padding: '100px 0'\r\n      }\r\n   }))\r\n\r\n   return (\r\n      <Container className={`${useStyles().position} ${useStyles().container}`}>\r\n         <Snackbar\r\n            anchorOrigin={{vertical: 'top', horizontal: \"right\"}}\r\n            open={openTooltip}\r\n            autoHideDuration={2000}\r\n            onClose={handleClose}>\r\n            <MuiAlert\r\n               style={{\r\n                  fontFamily: `Mochiy Pop P One, sans-serif`,\r\n                  letterSpacing: '2px'\r\n               }}\r\n               variant=\"filled\"\r\n               onClose={handleClose}\r\n               severity={resultStatusMessage ? 'success' : 'error'}>\r\n               {statusMessages}\r\n            </MuiAlert>\r\n         </Snackbar>\r\n\r\n         <form\r\n            className={`${useStyles().position} ${s.width}`}\r\n            noValidate\r\n            onSubmit={handleSubmit(onSubmit)}>\r\n\r\n            <TextField\r\n               fullWidth\r\n               helperText={errors.email?.message}\r\n               error={!!errors.email}\r\n               id={'email'}\r\n               required\r\n               label={'Email'}\r\n               type={\"text\"}\r\n               autoComplete={\"username\"}\r\n               margin={\"normal\"}\r\n               variant={'outlined'}\r\n               {...register(\"email\", {required: true})} />\r\n\r\n            <TextField\r\n               required\r\n               fullWidth\r\n               helperText={errors.password?.message}\r\n               error={!!errors.password}\r\n               id={'password'}\r\n               label={'Password'}\r\n               type={\"password\"}\r\n               autoComplete={\"current-password\"}\r\n               margin={\"normal\"}\r\n               variant={'outlined'}\r\n               {...register('password', {required: true})} />\r\n\r\n            <FormControlLabel style={{\r\n               margin: '20px 0',\r\n               alignSelf: 'self-start'\r\n            }} control={\r\n               <Checkbox\r\n                  color={'primary'}\r\n                  {...register(\"remember\", {required: false})}/>\r\n            } label={'Remember me?'}/>\r\n\r\n\r\n            {captchaUrl &&\r\n            <div style={{\r\n               marginBottom: '20px',\r\n               textAlign: 'center'\r\n            }}>\r\n               <img src={captchaUrl} alt=\"captcha\"/>\r\n               <TextField\r\n                  required\r\n                  fullWidth\r\n                  size={'small'}\r\n                  helperText={errors.captcha?.message}\r\n                  error={!!errors.captcha}\r\n                  label={'Enter captcha'}\r\n                  margin={\"normal\"}\r\n                  variant={'outlined'}\r\n                  {...register('captcha', {required: true})} />\r\n            </div>\r\n            }\r\n\r\n            <Button\r\n               style={{\r\n                  fontFamily: `Mochiy Pop P One, sans-serif`\r\n               }}\r\n               fullWidth\r\n               variant={\"contained\"}\r\n               color=\"primary\"\r\n               onClick={handleClick}\r\n               type={\"submit\"}>Login</Button>\r\n         </form>\r\n      </Container>\r\n   )\r\n}\r\n\r\nexport default LoginPage","import React from \"react\";\r\nimport s from './ProfileInfo.module.scss'\r\n\r\nimport {ContactsType} from \"../../../redux/reducer/profile-reducer\";\r\n\r\ntype ProfileContactType = {\r\n   contacts: ContactsType\r\n}\r\n\r\n\r\nexport const ProfileContact: React.FC<ProfileContactType> = (props) => {\r\n\r\n   return (\r\n      <div className={s.profileContact}>\r\n         <span className={s.contactTitle}>My Contact</span>\r\n         <ul className={s.profileContactList}>\r\n            <li className={s.profileContactItem}>\r\n               <a target='blank'\r\n                  href={props.contacts.facebook ? props.contacts.facebook : '#'}\r\n                  className={props.contacts.facebook ? `${s.linkFacebook} ${s.defaultLink}` : ` ${s.defaultLink} ${s.linkFacebook} ${s.linkNone}`}> </a>\r\n            </li>\r\n\r\n            <li className={s.profileContactItem}>\r\n               <a target='blank'\r\n                  href={props.contacts.vk ? props.contacts.vk : '#'}\r\n                  className={props.contacts.vk ? `${s.linkVk} ${s.defaultLink}` : `${s.linkVk} ${s.defaultLink} ${s.linkNone}`}> </a>\r\n            </li>\r\n\r\n            <li className={s.profileContactItem}>\r\n               <a target='blank'\r\n                  href={props.contacts.twitter ? props.contacts.twitter : '#'}\r\n                  className={props.contacts.twitter ? `${s.linkTwitter} ${s.defaultLink}` : `${s.linkTwitter} ${s.defaultLink} ${s.linkNone}`}> </a>\r\n            </li>\r\n\r\n            <li className={s.profileContactItem}>\r\n               <a target='blank'\r\n                  href={props.contacts.instagram ? props.contacts.instagram : '#'}\r\n                  className={props.contacts.instagram ? `${s.linkInstagram} ${s.defaultLink}` : `${s.linkInstagram} ${s.defaultLink} ${s.linkNone}`}> </a>\r\n            </li>\r\n\r\n            <li className={s.profileContactItem}>\r\n               <a target='blank'\r\n                  href={props.contacts.youtube ? props.contacts.youtube : '#'}\r\n                  className={props.contacts.youtube ? `${s.linkYoutube} ${s.defaultLink}` : `${s.linkYoutube} ${s.defaultLink} ${s.linkNone}`}> </a>\r\n            </li>\r\n\r\n            <li className={s.profileContactItem}>\r\n               <a target='blank'\r\n                  href={props.contacts.github ? props.contacts.github : '#'}\r\n                  className={props.contacts.github ? `${s.linkGithub} ${s.defaultLink}` : `${s.linkGithub} ${s.defaultLink} ${s.linkNone}`}> </a>\r\n            </li>\r\n\r\n            <li className={s.profileContactItem}>\r\n               <a target='blank'\r\n                  href={props.contacts.mainLink ? props.contacts.mainLink : '#'}\r\n                  className={props.contacts.mainLink ? `${s.linkMainLink} ${s.defaultLink}` : `${s.linkMainLink} ${s.defaultLink} ${s.linkNone}`}> </a>\r\n            </li>\r\n\r\n            <li className={s.profileContactItem}>\r\n               <a target='blank'\r\n                  href={props.contacts.website ? props.contacts.website : '#'}\r\n                  className={props.contacts.website ? ` ${s.linkWebsite} ${s.defaultLink}` : `${s.linkWebsite} ${s.defaultLink} ${s.linkNone}`}> </a>\r\n            </li>\r\n         </ul>\r\n      </div>\r\n\r\n   )\r\n}\r\n\r\n\r\n\r\n","import {TextField} from \"@material-ui/core\";\r\nimport React, {ChangeEvent, useEffect, useState} from \"react\";\r\nimport s from './ProfileInfo.module.scss'\r\n\r\ntype ProfileStatusType = {\r\n   status: string\r\n   updateStatus: (status: string) => void\r\n}\r\n\r\ntype StateType = {\r\n   editMode: boolean\r\n   status: string\r\n\r\n}\r\n\r\nexport const ProfileStatus: React.FC<ProfileStatusType> = (props) => {\r\n   const {status, updateStatus} = props\r\n\r\n   const [state, setState] = useState<StateType>({\r\n      editMode: false,\r\n      status: status,\r\n   })\r\n\r\n   useEffect(() => {\r\n      setState(state => ({...state, status: status}))\r\n   }, [status])\r\n\r\n   const onActivateEditMode = () => setState(state => ({...state, editMode: true}))\r\n\r\n   const offActivateEditMode = () => {\r\n      setState(state => ({...state, editMode: false}))\r\n      updateStatus(state.status)\r\n   }\r\n\r\n   const onChangeStatusInput = (e: ChangeEvent<HTMLInputElement>) => {\r\n      e.target.value.length < 310 && setState(state => ({...state, status: e.target.value}))\r\n   }\r\n\r\n   return (\r\n      <div className={s.statusUser}>\r\n         Status:\r\n         {state.editMode\r\n            ? <span className={s.editBlock}>\r\n               <TextField autoFocus\r\n                          multiline\r\n                          minRows={1}\r\n                          maxRows={15}\r\n                          fullWidth\r\n                          onBlur={offActivateEditMode}\r\n                          onChange={onChangeStatusInput}\r\n                          value={state.status}/>\r\n            </span>\r\n            : <span className={s.editBlock}>\r\n               <span className={s.stateStatus}\r\n                     onClick={onActivateEditMode}> {state.status || 'No status specified'}</span>\r\n            </span>}\r\n      </div>\r\n   )\r\n}\r\n","import React from \"react\";\r\nimport s from './ProfileInfo.module.scss'\r\nimport {ProfileType} from \"../../../redux/reducer/profile-reducer\";\r\nimport {Button} from \"@material-ui/core\";\r\nimport {ProfileContact} from \"./ProfileContact\";\r\nimport {ProfileStatus} from \"./ProfileStatus\";\r\n\r\ntype ProfileInfoType = {\r\n   profile: ProfileType\r\n   authorizedProfile: boolean\r\n   setEditMode: (value: boolean) => void\r\n   updateStatus: (status: string) => void\r\n   status: string\r\n}\r\n\r\nexport const ProfileInfo: React.FC<ProfileInfoType> = (props) => {\r\n   const setEditModeHandler = () => props.setEditMode(true)\r\n\r\n   return (\r\n      <div className={s.wrap}>\r\n         {props.authorizedProfile\r\n            ? <ProfileStatus updateStatus={props.updateStatus} status={props.status}/>\r\n            : <div className={s.statusUser}>Status: <span>{props.status || 'No status specified'}</span></div>}\r\n\r\n         <ul className={s.profileContent}>\r\n            <li className={s.fullName}>\r\n               Full name:\r\n               <span\r\n                  className={s.spanDefault}>{props.profile.fullName ? props.profile.fullName : 'Data not filled'}</span>\r\n            </li>\r\n            <li className={s.aboutMe}>\r\n               About me:\r\n               <span\r\n                  className={s.spanDefault}>{props.profile.aboutMe ? props.profile.aboutMe : 'Data not filled'}</span>\r\n            </li>\r\n            <li className={s.lookingForAJob}>\r\n               Looking for a job:\r\n               <span\r\n                  className={s.spanDefault}>{props.profile.lookingForAJob ? 'Yes' : 'No'}</span>\r\n            </li>\r\n            <li className={s.lookingForAJobDescription}>\r\n               Looking for a job description:\r\n               <span\r\n                  className={s.spanDefault}>{props.profile.lookingForAJobDescription ? props.profile.lookingForAJobDescription : 'Data not filled'}</span>\r\n            </li>\r\n         </ul>\r\n\r\n         <div className={s.contactsWrap}>\r\n            <ProfileContact contacts={props.profile.contacts}/>\r\n\r\n            {props.authorizedProfile &&\r\n            <Button\r\n               style={{fontFamily: `Mochiy Pop P One, sans-serif`, letterSpacing: '2px'}}\r\n               fullWidth\r\n               variant=\"contained\"\r\n               color=\"primary\"\r\n               onClick={setEditModeHandler}>Edit Profile Info</Button>}\r\n         </div>\r\n      </div>\r\n\r\n   )\r\n}\r\n\r\n\r\n\r\n","import React, {useState} from \"react\";\r\nimport {ProfileEditFormType, ProfileType, saveProfile} from \"../../../redux/reducer/profile-reducer\";\r\nimport {Button, Checkbox, Container, FormControlLabel, makeStyles, TextField} from \"@material-ui/core\";\r\nimport Snackbar from \"@mui/material/Snackbar\";\r\nimport MuiAlert from \"@mui/material/Alert\";\r\nimport {SubmitHandler, useForm} from \"react-hook-form\";\r\nimport {yupResolver} from \"@hookform/resolvers/yup\";\r\nimport * as yup from \"yup\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppRootStateT} from \"../../../redux/redux-store\";\r\nimport s from './ProfileInfo.module.scss'\r\n\r\ntype ProfileInfoType = {\r\n   profile: ProfileType\r\n   setEditMode: (value: boolean) => void\r\n}\r\n\r\nexport const ProfileInfoEditForm: React.FC<ProfileInfoType> = (props) => {\r\n   const [openTooltip, setOpenTooltip] = useState<boolean>(false)\r\n   const handleClick = () => setOpenTooltip(true)\r\n   const handleClose = () => setOpenTooltip(false)\r\n\r\n   const dispatch = useDispatch()\r\n\r\n   const profile = useSelector<AppRootStateT, ProfileType | null>(state => state.profilePage.profile)\r\n\r\n   const schema = yup.object().shape({\r\n      aboutMe: yup\r\n         .string()\r\n         .required('About me is a required field'),\r\n      fullName: yup\r\n         .string()\r\n         .required('Full name is a required field'),\r\n      lookingForAJobDescription: yup\r\n         .string()\r\n         .required('Description is a required field'),\r\n      contacts: yup.object().shape({\r\n         website: yup\r\n            .string()\r\n            .url('Website should have correct format'),\r\n         github: yup\r\n            .string()\r\n            .url('Github should have correct format'),\r\n         vk: yup\r\n            .string()\r\n            .url('Vkontakte should have correct format'),\r\n         facebook: yup\r\n            .string()\r\n            .url('Facebook should have correct format'),\r\n         instagram: yup\r\n            .string()\r\n            .url('Instagram should have correct format'),\r\n         twitter: yup\r\n            .string()\r\n            .url('Twitter should have correct format'),\r\n         youtube: yup\r\n            .string()\r\n            .url('Youtube should have correct format'),\r\n         mainLink: yup\r\n            .string()\r\n            .url('MainLink should have correct format'),\r\n      })\r\n   })\r\n\r\n   const {register, handleSubmit, formState: {errors}} = useForm<ProfileEditFormType>({\r\n      defaultValues: {\r\n         aboutMe: profile?.aboutMe,\r\n         fullName: profile?.fullName,\r\n         lookingForAJob: profile?.lookingForAJob,\r\n         lookingForAJobDescription: profile?.lookingForAJobDescription,\r\n         contacts: {\r\n            github: profile?.contacts.github,\r\n            vk: profile?.contacts.vk,\r\n            facebook: profile?.contacts.facebook,\r\n            instagram: profile?.contacts.instagram,\r\n            mainLink: profile?.contacts.mainLink,\r\n            twitter: profile?.contacts.twitter,\r\n            website: profile?.contacts.website,\r\n            youtube: profile?.contacts.youtube,\r\n         }\r\n      },\r\n      mode: \"onBlur\",\r\n      resolver: yupResolver(schema)\r\n   })\r\n\r\n   const onSubmit: SubmitHandler<ProfileEditFormType> = (data) => {\r\n      dispatch(saveProfile(data))\r\n      props.setEditMode(false)\r\n      console.log(data)\r\n   }\r\n\r\n   const useStyles = makeStyles(() => ({\r\n      position: {\r\n         display: 'flex',\r\n         justifyContent: 'center',\r\n         flexDirection: 'column',\r\n         alignItems: 'center',\r\n         padding: '0'\r\n      },\r\n      container: {\r\n         margin: '100px 0'\r\n      },\r\n      width: {\r\n         width: '100%'\r\n      },\r\n      btn: {\r\n         width: '200px'\r\n      },\r\n      input: {\r\n         height: '30px'\r\n      }\r\n   }))\r\n\r\n   return (\r\n      <Container className={`${useStyles().position}`}>\r\n         <Snackbar\r\n            anchorOrigin={{vertical: 'top', horizontal: \"right\"}}\r\n            open={openTooltip}\r\n            autoHideDuration={2000}\r\n            onClose={handleClose}>\r\n            <MuiAlert\r\n               style={{\r\n                  fontFamily: `Mochiy Pop P One, sans-serif`,\r\n                  letterSpacing: '2px'\r\n               }}\r\n               variant=\"filled\"\r\n               onClose={handleClose}\r\n               severity={!!errors ? 'error' : 'success'}>\r\n               {!!errors ? 'Data is filled incorrectly!!!' : 'Data saved!!!'}\r\n            </MuiAlert>\r\n         </Snackbar>\r\n\r\n         <form\r\n            className={`${useStyles().position} ${useStyles().width}`}\r\n            noValidate\r\n            onSubmit={handleSubmit(onSubmit)}>\r\n\r\n            <div className={s.profileEditWrap}>\r\n               <div className={s.profileEditInfo}>\r\n                  <span className={s.profileEditInfoDesc}>Profile info:</span>\r\n\r\n                  <TextField\r\n                     fullWidth\r\n                     required\r\n                     helperText={errors.fullName?.message}\r\n                     error={!!errors.fullName}\r\n                     label={'Full name:'}\r\n                     margin={\"normal\"}\r\n                     variant={'outlined'}\r\n                     {...register(\"fullName\")} />\r\n\r\n                  <TextField\r\n                     fullWidth\r\n                     required\r\n                     helperText={errors.aboutMe?.message}\r\n                     error={!!errors.aboutMe}\r\n                     label={'About me:'}\r\n                     margin={\"normal\"}\r\n                     variant={'outlined'}\r\n                     multiline\r\n                     minRows={2}\r\n                     maxRows={10}\r\n                     {...register('aboutMe')} />\r\n\r\n                  <TextField\r\n                     fullWidth\r\n                     required\r\n                     helperText={errors.lookingForAJobDescription?.message}\r\n                     error={!!errors.lookingForAJobDescription}\r\n                     label={'Looking for a job description:'}\r\n                     margin={\"normal\"}\r\n                     variant={'outlined'}\r\n                     multiline\r\n                     minRows={2}\r\n                     maxRows={10}\r\n                     {...register('lookingForAJobDescription')} />\r\n\r\n\r\n                  <FormControlLabel style={{\r\n                     margin: '20px 0',\r\n                     alignSelf: 'self-start'\r\n                  }} control={\r\n                     <Checkbox\r\n                        defaultChecked={profile ? profile.lookingForAJob : false}\r\n                        color={'primary'}\r\n                        {...register(\"lookingForAJob\")}/>\r\n                  } label={'Looking for a job?'}/>\r\n               </div>\r\n               <div className={s.profileEditContact}>\r\n                  <span className={s.profileEditContactDesc}>Contacts:</span>\r\n                  <div className={s.profileEditContactWrap}>\r\n                     <div className={s.profileEditContactLeft}>\r\n                        <TextField\r\n                           helperText={errors.contacts?.facebook?.message}\r\n                           error={!!errors.contacts?.facebook}\r\n                           fullWidth\r\n                           size={'small'}\r\n                           label={'Facebook:'}\r\n                           margin={\"normal\"}\r\n                           variant={'outlined'}\r\n                           {...register(\"contacts.facebook\")} />\r\n\r\n                        <TextField\r\n                           fullWidth\r\n                           size={'small'}\r\n                           helperText={errors.contacts?.vk?.message}\r\n                           error={!!errors.contacts?.vk}\r\n                           label={'Vkontakte:'}\r\n                           margin={\"normal\"}\r\n                           variant={'outlined'}\r\n                           {...register(\"contacts.vk\")} />\r\n\r\n                        <TextField\r\n                           fullWidth\r\n                           helperText={errors.contacts?.twitter?.message}\r\n                           error={!!errors.contacts?.twitter}\r\n                           size={'small'}\r\n                           label={'Twitter:'}\r\n                           margin={\"normal\"}\r\n                           variant={'outlined'}\r\n                           {...register(\"contacts.twitter\")} />\r\n\r\n                        <TextField\r\n                           fullWidth\r\n                           size={'small'}\r\n                           helperText={errors.contacts?.instagram?.message}\r\n                           error={!!errors.contacts?.instagram}\r\n                           label={'Instagram:'}\r\n                           margin={\"normal\"}\r\n                           variant={'outlined'}\r\n                           {...register(\"contacts.instagram\")} />\r\n\r\n                     </div>\r\n                     <div className={s.profileEditContactRight}>\r\n                        <TextField\r\n                           fullWidth\r\n                           size={'small'}\r\n                           helperText={errors.contacts?.youtube?.message}\r\n                           error={!!errors.contacts?.youtube}\r\n                           label={'Youtube:'}\r\n                           margin={\"normal\"}\r\n                           variant={'outlined'}\r\n                           {...register(\"contacts.youtube\")} />\r\n\r\n\r\n                        <TextField\r\n                           fullWidth\r\n                           size={'small'}\r\n                           helperText={errors.contacts?.github?.message}\r\n                           error={!!errors.contacts?.github}\r\n                           label={'Github:'}\r\n                           margin={\"normal\"}\r\n                           variant={'outlined'}\r\n                           {...register(\"contacts.github\")} />\r\n\r\n                        <TextField\r\n                           fullWidth\r\n                           size={'small'}\r\n                           helperText={errors.contacts?.mainLink?.message}\r\n                           error={!!errors.contacts?.mainLink}\r\n                           label={'Main Link:'}\r\n                           margin={\"normal\"}\r\n                           variant={'outlined'}\r\n                           {...register(\"contacts.mainLink\")} />\r\n\r\n                        <TextField\r\n                           fullWidth\r\n                           size={'small'}\r\n                           helperText={errors.contacts?.website?.message}\r\n                           error={!!errors.contacts?.website}\r\n                           label={'Website:'}\r\n                           margin={\"normal\"}\r\n                           variant={'outlined'}\r\n                           {...register(\"contacts.website\")} />\r\n                     </div>\r\n                  </div>\r\n               </div>\r\n            </div>\r\n            <Button\r\n               style={{\r\n                  fontFamily: `Mochiy Pop P One, sans-serif`\r\n               }}\r\n               className={useStyles().btn}\r\n               fullWidth\r\n               variant={\"contained\"}\r\n               color=\"primary\"\r\n               type={\"submit\"}\r\n               onClick={handleClick}\r\n            >Save</Button>\r\n         </form>\r\n      </Container>\r\n\r\n   )\r\n}\r\n\r\n\r\n\r\n","import React, {ChangeEvent, useState} from \"react\";\r\nimport s from './ProfileInfo.module.scss'\r\nimport {ProfileContainerType} from \"../Profile\";\r\nimport {ProfileInfo} from \"./ProfileInfo\";\r\nimport {ProfileInfoEditForm} from \"./ProfileInfoEditForm\";\r\nimport AddPhotoAlternateIcon from '@mui/icons-material/AddPhotoAlternate';\r\nimport {Button} from \"@material-ui/core\";\r\nimport {Avatar, Image} from 'antd';\r\n\r\ntype ProfileInfoType = {\r\n   authorizedProfile: boolean\r\n}\r\n\r\n\r\nexport const ProfileDesc: React.FC<ProfileContainerType & ProfileInfoType> = (props) => {\r\n   const defaultAvatar = (src: string | null | undefined) => src ? src : 'https://media.istockphoto.com/vectors/web-developer-blue-rgb-color-icon-computer-software-development-pc-vector-id1251725147?k=20&m=1251725147&s=170667a&w=0&h=dP5REX1HGPDsX_YVsuvXubqJGhN-pg9_ooSkurdWPAA='\r\n   const uploadPhotoHandler = (e: ChangeEvent<HTMLInputElement>) => {\r\n      e.target.files && props.savePhoto(e.target.files[0])\r\n   }\r\n\r\n   const [editMode, setEditMode] = useState<boolean>(false)\r\n\r\n   if (!props.profile) {\r\n      return <div>No profile, error!!!</div>\r\n   }\r\n\r\n   return (\r\n      <div className={s.profileWrap}>\r\n         <span className={s.profileBackground}> <img\r\n            src='https://images.unsplash.com/photo-1542903660-eedba2cda473?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1000&q=80'\r\n            alt=\"logo\"/> </span>\r\n         <div className={s.profileDesc}>\r\n            <div className={s.flexLeft}>\r\n               <div className={s.profileAvatar}>\r\n                  <Avatar style={props.profile?.photos.large ? {} : {border: '2px solid #7e7e7e', borderRadius: '5px'}}\r\n                          size={300} shape={'square'}\r\n                          src={<Image src={defaultAvatar(props.profile?.photos.large)}/>}/>\r\n               </div>\r\n               {props.authorizedProfile &&\r\n               <label htmlFor=\"contained-button-file\">\r\n                  <input onChange={uploadPhotoHandler}\r\n                         style={{display: \"none\"}}\r\n                         id=\"contained-button-file\"\r\n                         accept=\"image/*\"\r\n                         multiple type=\"file\"/>\r\n                  <Button style={{fontFamily: `Mochiy Pop P One, sans-serif`, fontSize: '12px'}}\r\n                          color={'primary'}\r\n                          variant=\"contained\"\r\n                          component=\"span\">\r\n                     Click to Upload\r\n                     <AddPhotoAlternateIcon/>\r\n                  </Button>\r\n               </label>\r\n\r\n               }\r\n            </div>\r\n\r\n            <div className={s.profileInfo}>\r\n\r\n               {editMode\r\n                  ? <ProfileInfoEditForm\r\n                     setEditMode={setEditMode}\r\n                     profile={props.profile}/>\r\n                  : <ProfileInfo\r\n                     updateStatus={props.updateStatus}\r\n                     status={props.status}\r\n                     setEditMode={setEditMode}\r\n                     authorizedProfile={props.authorizedProfile}\r\n                     profile={props.profile}/>}\r\n            </div>\r\n         </div>\r\n      </div>\r\n   )\r\n}\r\n\r\n\r\n\r\n","import {AppRootStateT} from \"../redux-store\";\r\n\r\nexport const getProfile = (state: AppRootStateT) => state.profilePage.profile\r\n\r\nexport const getProfileStatus = (state: AppRootStateT) => state.profilePage.status\r\n\r\nexport const getAuthorizedUserId = (state: AppRootStateT) => state.auth.userData ? state.auth.userData.id : 0","import React, {useState} from \"react\";\r\nimport s from './Post.module.scss'\r\nimport {IconButton, Paper} from \"@material-ui/core\";\r\nimport FavoriteBorderIcon from '@mui/icons-material/FavoriteBorder';\r\nimport FavoriteIcon from '@mui/icons-material/Favorite';\r\nimport {useDispatch} from \"react-redux\";\r\nimport {deletePostSuccess, setLikeSuccess} from \"../../../../redux/reducer/profile-reducer\";\r\nimport ClearIcon from '@mui/icons-material/Clear';\r\n\r\ntype PostPropsType = {\r\n   message: string,\r\n   likesCount: number,\r\n   profileAvatar: string | null | undefined\r\n   id: string\r\n   authorizedProfile: boolean\r\n}\r\n\r\nexport const Post: React.FC<PostPropsType> = (props) => {\r\n   const defaultAvatar = (src: string | null | undefined) => src ? src : 'https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png'\r\n   const [like, setLike] = useState<boolean>(false)\r\n\r\n   const dispatch = useDispatch()\r\n\r\n   const likePost = () => {\r\n      setLike(state => !state)\r\n      dispatch(setLikeSuccess(props.likesCount + 1, props.id))\r\n   }\r\n\r\n   const removeLikePost = () => {\r\n      setLike(state => !state)\r\n      dispatch(setLikeSuccess(props.likesCount - 1, props.id))\r\n   }\r\n\r\n   const deletePost = () => dispatch(deletePostSuccess(props.id))\r\n\r\n   return (\r\n      <div className={s.wrap}>\r\n         <Paper style={{width: '100%'}} elevation={5}>\r\n            <div className={s.post}>\r\n               <div className={s.postWrap}>\r\n                  <span className={s.postAvatar}><img src={defaultAvatar(props.profileAvatar)} alt=\"avatar\"/></span>\r\n\r\n                  <p className={s.desc}>\r\n                     {props.message}\r\n                  </p>\r\n\r\n               </div>\r\n\r\n               <div className={s.likeControl}>\r\n                  {like\r\n                     ? <IconButton color=\"primary\"\r\n                                   aria-label=\"like post\"\r\n                                   component=\"span\"\r\n                                   onClick={removeLikePost}\r\n                                   size={'medium'}>\r\n                        <FavoriteIcon fontSize={'medium'}/>\r\n                     </IconButton>\r\n                     : <IconButton color=\"primary\"\r\n                                   aria-label=\"like post\"\r\n                                   component=\"span\"\r\n                                   onClick={likePost}\r\n                     >\r\n                        <FavoriteBorderIcon fontSize={'medium'}/>\r\n                     </IconButton>}\r\n                  <span className={s.likeCount}>{props.likesCount} </span>\r\n\r\n                  {props.authorizedProfile &&\r\n                  <div className={s.clearIcon}>\r\n                     <IconButton\r\n                        color=\"primary\"\r\n                        aria-label=\"delete post\"\r\n                        component=\"span\"\r\n                        onClick={deletePost}>\r\n                        <ClearIcon fontSize={'large'}/>\r\n                     </IconButton>\r\n                  </div>}\r\n               </div>\r\n            </div>\r\n         </Paper>\r\n      </div>\r\n   )\r\n}","import React, {ChangeEvent} from \"react\";\r\nimport s from './MyPosts.module.scss'\r\nimport {Post} from \"./Post/Post\";\r\n\r\nimport {Button, Paper, TextField} from \"@material-ui/core\";\r\nimport {addPostAC, changeTextAC, ProfilePageType} from \"../../../redux/reducer/profile-reducer\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppRootStateT} from \"../../../redux/redux-store\";\r\n\r\ntype MyPostsPropsT = {\r\n   authorizedProfile: boolean\r\n}\r\n\r\nexport const MyPosts: React.FC<MyPostsPropsT> = React.memo((props) => {\r\n   const profilePage = useSelector<AppRootStateT, ProfilePageType>(state => state.profilePage)\r\n   const dispatch = useDispatch()\r\n\r\n   const postElem = profilePage.posts.length\r\n      ? profilePage.posts.map(el => <Post\r\n         authorizedProfile={props.authorizedProfile}\r\n         id={el.id}\r\n         profileAvatar={profilePage.profile?.photos.small}\r\n         key={el.id} message={el.message}\r\n         likesCount={el.likesCount}/>)\r\n      : <Paper style={{padding: '20px'}} elevation={2}>\r\n         <div style={{fontFamily: `Mochiy Pop P One, sans-serif`, fontSize: '18px', letterSpacing: '1px'}}>\r\n            There are no posts\r\n         </div>\r\n      </Paper>\r\n\r\n   const onClickForNewPosts = () => dispatch(addPostAC())\r\n\r\n   const onChangeFromTextArea = (e: ChangeEvent<HTMLTextAreaElement>) => dispatch(changeTextAC(e.currentTarget.value))\r\n\r\n   return (\r\n      <div className={s.main}>\r\n         <h3>My post</h3>\r\n\r\n         {props.authorizedProfile &&\r\n         <div className={s.addPost}>\r\n            <div className={s.textFieldWrap}>\r\n               <TextField\r\n                  className={s.textFieldWrap}\r\n                  value={profilePage.newPostText}\r\n                  onChange={onChangeFromTextArea}\r\n                  label=\"You news...\"\r\n                  variant=\"outlined\"/>\r\n            </div>\r\n\r\n            <div className={s.btnWrap}>\r\n               <Button\r\n                  style={{\r\n                     color: 'white',\r\n                     fontFamily: `Mochiy Pop P One, sans-serif`\r\n                  }}\r\n                  className={s.addPostBtn}\r\n                  onClick={onClickForNewPosts}\r\n                  variant=\"contained\"> Add post</Button>\r\n            </div>\r\n         </div>}\r\n         {postElem}\r\n      </div>\r\n   )\r\n})\r\n\r\n\r\n","import React, {useEffect} from \"react\";\r\nimport s from './Profile.module.css'\r\nimport {ProfileDesc} from \"./ProfileInfo/ProfileDesc\";\r\nimport {Preloader} from \"../common/Preloader/Preloader\";\r\nimport {connect} from \"react-redux\";\r\nimport {getStatus, ProfileType, savePhoto, setUserProfile, updateStatus} from \"../../redux/reducer/profile-reducer\";\r\nimport {AppRootStateT} from \"../../redux/redux-store\";\r\nimport {getAuthorizedUserId, getProfile, getProfileStatus} from \"../../redux/selectors/profile-selector\";\r\nimport {useNavigate, useParams} from \"react-router-dom\";\r\nimport {MyPosts} from \"./MyPosts/MyPosts\";\r\nimport {PATH} from \"../../Router/Routes\";\r\n\r\n\r\nexport type ProfileContainerType = MapStateToPropsType & MapDispatchToPropsType\r\n\r\nexport const Profile: React.FC<ProfileContainerType> = (props) => {\r\n   const {authorizedUserId, setUserProfile, profile, getStatus} = props\r\n\r\n   const finalClassName = !profile ? `${s.main} ${s.fetching}` : s.main\r\n\r\n   const navigate = useNavigate()\r\n   const {userId} = useParams()\r\n\r\n   useEffect(() => {\r\n      let id = isNaN(Number(userId)) ? authorizedUserId : Number(userId)\r\n\r\n      if (!id) return navigate(PATH.LOGIN)\r\n\r\n      setUserProfile(id)\r\n      getStatus(id)\r\n   }, [userId, setUserProfile, getStatus, authorizedUserId, navigate])\r\n\r\n\r\n   if (!props.profile) {\r\n      return <Preloader/>\r\n   }\r\n\r\n   return (\r\n      <main className={finalClassName}>\r\n         <ProfileDesc authorizedProfile={Number(userId) === authorizedUserId} {...props} />\r\n         <MyPosts authorizedProfile={Number(userId) === authorizedUserId}/>\r\n      </main>\r\n   )\r\n}\r\n\r\nexport type MapStateToPropsType = {\r\n   profile: ProfileType | null\r\n   status: string\r\n   authorizedUserId: number\r\n}\r\n\r\ntype MapDispatchToPropsType = {\r\n   setUserProfile: (id: number) => void\r\n   getStatus: (id: number) => void\r\n   updateStatus: (status: string) => void\r\n   savePhoto: (file: File) => void\r\n}\r\n\r\nconst mapStateToProps = (state: AppRootStateT): MapStateToPropsType => {\r\n   return {\r\n      profile: getProfile(state),\r\n      status: getProfileStatus(state),\r\n      authorizedUserId: getAuthorizedUserId(state)\r\n   }\r\n}\r\n\r\nexport const ProfileContainer = connect(mapStateToProps, {\r\n   savePhoto,\r\n   setUserProfile,\r\n   getStatus,\r\n   updateStatus\r\n})(Profile)\r\n\r\nexport default ProfileContainer","import React from \"react\";\r\nimport s from './notFound.module.scss'\r\n\r\n\r\nexport const NotFound: React.FC = () => {\r\n\r\n\r\n   return (\r\n      <div className={s.wrap}>\r\n         <h4 className={s.title}>404 Page Not Found</h4>\r\n      </div>\r\n   )\r\n}\r\n\r\n","export default __webpack_public_path__ + \"static/media/SpotifyIcon.e4c0ed75.svg\";","import React from 'react';\r\nimport {NeonBtn} from \"../common/NeonBtn/NeonBtn\";\r\nimport s from './music.module.scss'\r\nimport logo from '../../image/SpotifyIcon.svg'\r\nimport {AUTH_URL} from \"../../api/spotify-api\";\r\n\r\nexport const LoginSpotify: React.FC = () => {\r\n   return (\r\n      <div className={s.container}>\r\n         <h2> Music from <span><img src={logo} alt=\"spotifyLogo\"/></span></h2>\r\n\r\n         <p>\r\n            Yo! You can listen to music from Spotify. To do this, you need to log in!\r\n         </p>\r\n         <p>\r\n            Spotify makes it easy to find music or podcasts for any situation, as our service is available on phones,\r\n            computers, tablets and other devices.\r\n         </p>\r\n\r\n         <NeonBtn\r\n            className={s.btn}\r\n            goAnotherSite={true} link={AUTH_URL}\r\n            name={'Login With Spotify'}/>\r\n      </div>\r\n   )\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport {SearchResultsT} from \"./Dashboard\";\r\nimport s from './music.module.scss'\r\n\r\n\r\nexport const SearchResult: React.FC<{ track: SearchResultsT, chooseTrack: (song: any) => void }> = React.memo((\r\n   {\r\n      track,\r\n      chooseTrack\r\n   }) => {\r\n\r\n   const onClickHandler = () => chooseTrack(track)\r\n\r\n   return (\r\n      <div onClick={onClickHandler} className={s.searchResult}>\r\n         <img src={track.albumUrl} alt=\"track album logo\"/>\r\n         <div className={s.descWrap}>\r\n            <div className={s.trackTitle}>{track.title}</div>\r\n            <div className={s.trackArtist}>{track.artist}</div>\r\n         </div>\r\n      </div>\r\n   )\r\n})\r\n\r\n\r\n\r\n","import React, {useEffect, useState} from 'react';\r\nimport SpotifyPlayer from 'react-spotify-web-playback';\r\n\r\nexport const PlayerSpotify: React.FC<{ token: string, trackUri?: string }> = ({token, trackUri}) => {\r\n   const [play, setPlay] = useState<boolean>(false)\r\n\r\n   useEffect(() => {\r\n      setPlay(true)\r\n   }, [trackUri])\r\n\r\n   if (!token) return <div></div>\r\n\r\n   return <SpotifyPlayer\r\n      styles={{sliderColor: '#1cb954'}}\r\n      showSaveIcon\r\n      play={play}\r\n      callback={state => {\r\n         if (!state.isPlaying) setPlay(false)\r\n      }}\r\n      uris={trackUri ? [trackUri] : []}\r\n      token={token}/>\r\n\r\n\r\n}","export default __webpack_public_path__ + \"static/media/Spotify.c8d377d8.svg\";","import React, {ChangeEvent, useCallback, useEffect, useState} from 'react';\r\nimport {TextField} from \"@material-ui/core\";\r\nimport s from './music.module.scss'\r\nimport {useAuth} from \"./useAuth\";\r\nimport {SearchResult} from \"./SearchResult\";\r\nimport {PlayerSpotify} from \"./PlayerSpotify\";\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {\r\n   getRecommendedTracks,\r\n   getSearchResults,\r\n   setChooseTrack,\r\n   setLyricsOfPlayingSong,\r\n   setSearch,\r\n   setSearchResults\r\n} from \"../../redux/reducer/spotify-reducer\";\r\nimport {spotifyAPI} from \"../../api/spotify-api\";\r\nimport {AppRootStateT} from \"../../redux/redux-store\";\r\nimport {Scrollbars} from 'react-custom-scrollbars';\r\nimport spotifyLogo from '../../image/Spotify.svg'\r\n\r\n\r\nexport type SearchResultsT = {\r\n   artist: string\r\n   title: string\r\n   uri: string\r\n   albumUrl: string\r\n}\r\n\r\nexport const Dashboard: React.FC<{ code: string | null }> = ({code}) => {\r\n   const search = useSelector<AppRootStateT, string>(state => state.spotify.dashboard.search)\r\n   const searchResults = useSelector<AppRootStateT, SearchResultsT[]>(state => state.spotify.dashboard.searchResults)\r\n   const playingTrack = useSelector<AppRootStateT, SearchResultsT | null>(state => state.spotify.dashboard.playingTrack)\r\n   const lyrics = useSelector<AppRootStateT, string>(state => state.spotify.dashboard.lyrics)\r\n   const recommendedTracks = useSelector<AppRootStateT, SearchResultsT[]>(state => state.spotify.recommendedTracks)\r\n\r\n   const [startSearch, setStartSearch] = useState<boolean>(true)\r\n\r\n   const dispatch = useDispatch()\r\n\r\n   const accessToken = useAuth(code as string)\r\n\r\n   const chooseTrack = useCallback((track: SearchResultsT) => {\r\n      startSearch && setStartSearch(false)\r\n      dispatch(setChooseTrack(track))\r\n\r\n   }, [dispatch, startSearch])\r\n\r\n   const onChangeHandler = (e: ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => {\r\n      !startSearch && setStartSearch(true)\r\n      dispatch(setSearch(e.currentTarget.value.trimLeft()))\r\n   }\r\n\r\n   useEffect(() => {\r\n      if (!playingTrack) return\r\n\r\n      dispatch(setLyricsOfPlayingSong(playingTrack.title, playingTrack.artist))\r\n   }, [playingTrack, dispatch])\r\n\r\n   useEffect(() => {\r\n      if (!accessToken) return\r\n\r\n      spotifyAPI.setAccessToken(accessToken)\r\n   }, [accessToken])\r\n\r\n   useEffect(() => {\r\n      if (!accessToken) return\r\n\r\n      dispatch(getRecommendedTracks())\r\n\r\n   }, [accessToken, playingTrack, dispatch])\r\n\r\n   useEffect(() => {\r\n      if (!search) {\r\n         dispatch(setSearchResults([]))\r\n         return\r\n      }\r\n      if (!accessToken) return\r\n\r\n      let cancel = false\r\n\r\n      dispatch(getSearchResults(search, cancel))\r\n\r\n      return () => {\r\n         cancel = true\r\n      }\r\n   }, [search, accessToken, dispatch])\r\n\r\n   const trackSearchResult = searchResults.map((track) => {\r\n      return <SearchResult chooseTrack={chooseTrack} track={track} key={track.uri}/>\r\n   })\r\n\r\n   const recommendedMusic = recommendedTracks.map((track) => {\r\n      return <SearchResult chooseTrack={chooseTrack} track={track} key={track.uri}/>\r\n   })\r\n\r\n   return (\r\n      <div className={s.wrap}>\r\n         <div className={s.title}>Spotify music <span><img src={spotifyLogo} alt=\"spotify logo\"/></span></div>\r\n\r\n         <TextField\r\n            variant={'outlined'}\r\n            margin={\"normal\"}\r\n            fullWidth\r\n            value={search}\r\n            onChange={onChangeHandler}\r\n            label={'Search song/artist/'}/>\r\n\r\n         <div className={s.song}>\r\n            <Scrollbars>\r\n               {trackSearchResult}\r\n\r\n               {startSearch && !search && !searchResults.length &&\r\n               <div className={s.recommendedTracks}>\r\n                  <span>Random recommended tracks. </span>\r\n                  {recommendedMusic}\r\n               </div>}\r\n\r\n               {search && !searchResults.length &&\r\n               <div className={s.notSearch}>\r\n                  There is nothing for \"<span>{search}</span>\".\r\n                  <span>Check for typos or try another query.</span>\r\n               </div>}\r\n\r\n               {!startSearch && playingTrack &&\r\n               <div className={lyrics === 'No Lyrics Found' ? `${s.lyrics} ${s.notFound}` : s.lyrics}>{lyrics}</div>}\r\n            </Scrollbars>\r\n         </div>\r\n\r\n         <div className={playingTrack ? s.player : `${s.player} ${s.none}`}>\r\n            <PlayerSpotify\r\n               trackUri={playingTrack?.uri}\r\n               token={accessToken ? accessToken : ''}/>\r\n         </div>\r\n      </div>\r\n   )\r\n}\r\n\r\n\r\n","import {useEffect} from \"react\"\r\nimport {useNavigate,} from \"react-router-dom\";\r\nimport {loginTokenSpotify, refreshTokenSpotify} from \"../../redux/reducer/spotify-reducer\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppRootStateT} from \"../../redux/redux-store\";\r\nimport {PATH} from \"../../Router/Routes\";\r\n\r\nexport const useAuth = (code: string) => {\r\n   const accessToken = useSelector<AppRootStateT, string>(state => state.spotify.token.accessToken)\r\n   const refreshToken = useSelector<AppRootStateT, string>(state => state.spotify.token.refreshToken)\r\n   const expiresIn = useSelector<AppRootStateT, number>(state => state.spotify.token.expiresIn)\r\n\r\n   const dispatch = useDispatch()\r\n\r\n   const navigate = useNavigate()\r\n\r\n   useEffect(() => {\r\n      if (!accessToken) dispatch(loginTokenSpotify(code))\r\n\r\n      //@ts-ignore\r\n      window.history.pushState({}, null, \"/\")\r\n      navigate(PATH.SPOTIFY_MUSIC, {replace: true})\r\n   }, [code])\r\n\r\n   useEffect(() => {\r\n      if (!refreshToken || !expiresIn) return\r\n\r\n      const interval = setInterval(() => {\r\n         dispatch(refreshTokenSpotify(refreshToken))\r\n\r\n         navigate(PATH.SPOTIFY_MUSIC)\r\n      }, (expiresIn - 60) * 1000)\r\n\r\n      return () => clearInterval(interval)\r\n   }, [refreshToken, expiresIn])\r\n\r\n   return accessToken\r\n}","import React from 'react';\r\nimport {LoginSpotify} from \"./LoginSpotify\";\r\nimport {Dashboard} from \"./Dashboard\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {AppRootStateT} from \"../../redux/redux-store\";\r\nimport {Preloader} from \"../common/Preloader/Preloader\";\r\n\r\nconst code = new URLSearchParams(window.location.search).get(\"code\")\r\n\r\nexport const Music = () => {\r\n   const isFetching = useSelector<AppRootStateT, boolean>(state => state.spotify.isFetching)\r\n\r\n   return (\r\n      <>\r\n         {isFetching && <Preloader/>}\r\n\r\n         {code ? <Dashboard code={code}/> : <LoginSpotify/>}\r\n      </>\r\n   )\r\n}","import axios from \"axios\";\r\nimport SpotifyWebApi from \"spotify-web-api-node\";\r\n\r\nexport const AUTH_URL =\r\n   \"https://accounts.spotify.com/authorize?client_id=ea7ec046e46f4faea91091b10e65d993&response_type=code&redirect_uri=https://mrgentelman.github.io/Social_Network/&scope=streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state\"\r\n\r\n\r\nconst instance = axios.create({\r\n   baseURL: 'https://spotify-provider-server.herokuapp.com/'\r\n})\r\n\r\nconst spotifyWebApi = new SpotifyWebApi({\r\n   clientId: 'ea7ec046e46f4faea91091b10e65d993',\r\n})\r\n\r\ntype loginSpotifyR = {\r\n   accessToken: string\r\n   expiresIn: number\r\n   refreshToken: string\r\n}\r\n\r\nexport const spotifyAPI = {\r\n   loginToken(code: string) {\r\n      return instance.post<loginSpotifyR>(\"loginSpotify\", {code,})\r\n         .then(res => res.data)\r\n   },\r\n   refreshToken(token: string) {\r\n      return instance.post<{ expiresIn: number, refreshToken: string }>(\"refreshToken\", {token,})\r\n         .then(res => res.data)\r\n   },\r\n   getLyrics(title: string, artist: string) {\r\n      return instance.get<{ lyrics: string }>('lyrics', {\r\n         params: {track: title, artist: artist,}\r\n      })\r\n         .then(res => res.data)\r\n   },\r\n   searchTracks(search: string) {\r\n      return spotifyWebApi.searchTracks(search)\r\n   },\r\n   setAccessToken(accessToken: string) {\r\n      return spotifyWebApi.setAccessToken(accessToken)\r\n   },\r\n   getRecommended() {\r\n      return spotifyWebApi.getRecommendations({\r\n         min_energy: 0.4,\r\n         seed_genres: [\"chill\", \"dance\", \"study\", \"deep-house\"],\r\n         min_popularity: 70\r\n      })\r\n   },\r\n   getAvailableGenreSeeds() {\r\n      return spotifyWebApi.getAvailableGenreSeeds()\r\n   }\r\n}\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"post\":\"Post_post__k4GZ-\",\"wrap\":\"Post_wrap__3EhAP\",\"desc\":\"Post_desc__Ughsy\",\"postAvatar\":\"Post_postAvatar__3pshJ\",\"like\":\"Post_like__2ZYAF\",\"likeControl\":\"Post_likeControl__1_JgD\",\"dislike\":\"Post_dislike__UsBGU\",\"likeCount\":\"Post_likeCount__1vi1d\",\"postWrap\":\"Post_postWrap__WvrdL\",\"clearIcon\":\"Post_clearIcon__3t0I1\"};","import React, {FC} from \"react\";\r\nimport s from './preloader.module.css'\r\n\r\n\r\nexport const Preloader: FC = () => {\r\n   return (\r\n      <div className={s.preloader}>\r\n         <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"300px\" height=\"300px\" viewBox=\"0 0 100 100\"\r\n              preserveAspectRatio=\"xMidYMid\">\r\n            <g transform=\"translate(50 50)\">\r\n               <g transform=\"scale(1 -1)\">\r\n                  <g transform=\"translate(-50 -50)\">\r\n                     <g>\r\n                        <animateTransform attributeName=\"transform\" type=\"rotate\" values=\"-2 50 50;359 50 50\"\r\n                                          keyTimes=\"0;1\" dur=\"1s\" repeatCount=\"indefinite\" calcMode=\"spline\"\r\n                                          keySplines=\"0.5 0 0.5 1\"></animateTransform>\r\n                        <circle cx=\"50\" cy=\"50\" r=\"39.891\" stroke=\"#ffffff\" stroke-width=\"14.4\" fill=\"none\"\r\n                                stroke-dasharray=\"0 300\">\r\n                           <animate attributeName=\"stroke-dasharray\" values=\"10 300;60.15421082128821 300;4 300\"\r\n                                    keyTimes=\"0;0.5;1\" dur=\"1s\" repeatCount=\"indefinite\" calcMode=\"linear\"\r\n                                    keySplines=\"0 1 1 0;0 1 1 0\"></animate>\r\n                        </circle>\r\n                        <circle cx=\"50\" cy=\"50\" r=\"39.891\" stroke=\"#ffffff\" stroke-width=\"7.2\" fill=\"none\"\r\n                                stroke-dasharray=\"0 300\">\r\n                           <animate attributeName=\"stroke-dasharray\" values=\"10 300;60.15421082128821 300;4 300\"\r\n                                    keyTimes=\"0;0.5;1\" dur=\"1s\" repeatCount=\"indefinite\" calcMode=\"linear\"\r\n                                    keySplines=\"0 1 1 0;0 1 1 0\"></animate>\r\n                        </circle>\r\n                        <circle cx=\"50\" cy=\"50\" r=\"32.771\" stroke=\"#0a0a0a\" stroke-width=\"1\" fill=\"none\"\r\n                                stroke-dasharray=\"0 300\">\r\n                           <animate attributeName=\"stroke-dasharray\" values=\"10 300;49.41750376837973 300;4 300\"\r\n                                    keyTimes=\"0;0.5;1\" dur=\"1s\" repeatCount=\"indefinite\" calcMode=\"linear\"\r\n                                    keySplines=\"0 1 1 0;0 1 1 0\"></animate>\r\n                        </circle>\r\n                        <circle cx=\"50\" cy=\"50\" r=\"47.171\" stroke=\"#0a0a0a\" stroke-width=\"1\" fill=\"none\"\r\n                                stroke-dasharray=\"0 300\">\r\n                           <animate attributeName=\"stroke-dasharray\" values=\"10 300;72.03697087422624 300;4 300\"\r\n                                    keyTimes=\"0;0.5;1\" dur=\"1s\" repeatCount=\"indefinite\" calcMode=\"linear\"\r\n                                    keySplines=\"0 1 1 0;0 1 1 0\"></animate>\r\n                        </circle>\r\n                     </g>\r\n                  </g>\r\n               </g>\r\n            </g>\r\n            <g>\r\n               <animateTransform attributeName=\"transform\" type=\"rotate\" values=\"360 50 50;0 50 50\" keyTimes=\"0;1\"\r\n                                 dur=\"1s\" repeatCount=\"indefinite\" calcMode=\"spline\"\r\n                                 keySplines=\"0.5 0 0.5 1\"></animateTransform>\r\n               <path fill=\"#ffffff\" stroke=\"#0a0a0a\"\r\n                     d=\"M82.8,50c0,0.9,0.7,2.6,1.8,3.7c0.3,0.3,0.8,0.6,1,1c0.2,0.5,0.2,1-0.1,1.5c-0.3,0.5-0.8,0.9-1.1,1.3 c-0.5,0.5-0.8,1.1-0.9,1.7c-0.2,0.6-0.2,1.2,0.2,1.8c0.6,1,2,1.7,2,2.8c-0.1,0.9-1,1.5-1.4,2.2c-0.3,0.6-0.4,1.2-0.2,1.9 c0.2,0.7,0.5,1.3,1,1.8c1,1,2.4,1.4,3.9,1.5c-1.1-1-1.2-2.7-0.5-4c0.7-1.2,2.2-1.9,2.5-3.3c0.2-1.2-0.4-2.5,0.1-3.6 c0.7-1.5,3.3-1.3,4.1-2.9c0.3-0.9,0-1.9,0.3-2.8c0.2-0.7,0.6-1.1,1-1.5c0.4-0.4,0.8-0.9,0.9-1.6c0.1-0.5,0.1-0.9,0.1-1.6\"></path>\r\n\r\n            </g>\r\n            <g>\r\n               <animateTransform attributeName=\"transform\" type=\"rotate\" values=\"360 50 50;0 50 50\" keyTimes=\"0;1\"\r\n                                 dur=\"1s\" repeatCount=\"indefinite\" calcMode=\"spline\" keySplines=\"0.5 0 0.5 1\"\r\n                                 begin=\"-0.1s\"></animateTransform>\r\n               <path fill=\"#ffffff\" stroke=\"#0a0a0a\"\r\n                     d=\"M82.8,50c-0.1-3.1-0.4-6.2-1.3-9.2c-0.1-0.4-0.2-0.8-0.2-1.2c-0.1-0.4-0.1-0.8,0-1.2c0.1-0.8,0.3-1.6,0.7-2.4 c0.8-1.5,2-3,3.8-3.9l0,0c1.8-0.9,3.8-1,5.6-0.2c0.9,0.4,1.7,1,2.4,1.8c0.3,0.4,0.7,0.8,1,1.3c0.2,0.5,0.4,1,0.6,1.6 c1.4,4.3,1.9,8.8,1.9,13.3\"></path>\r\n               <path fill=\"#f9ae5c\"\r\n                     d=\"M93.6,35.5c0.1,0.4-0.3,0.8-1,1c-0.6,0.2-1.2,0.1-1.3-0.3c-0.1-0.3,0.3-0.8,0.9-1S93.5,35.1,93.6,35.5z\"></path>\r\n               <path fill=\"#f9ae5c\"\r\n                     d=\"M82.3,39.3c0.1,0.3,0.6,0.3,1.3,0.1c0.6-0.2,1.1-0.6,1-0.9c-0.1-0.3-0.7-0.3-1.3-0.1 C82.6,38.6,82.2,39,82.3,39.3z\"></path>\r\n               <path fill=\"#0a0a0a\"\r\n                     d=\"M88.9,37.5c0.1,0.3-0.2,0.7-0.7,0.8c-0.5,0.1-0.9,0-1-0.3c-0.1-0.3,0.2-0.7,0.7-0.8C88.4,37,88.9,37.2,88.9,37.5z\"></path>\r\n               <path fill=\"none\" stroke=\"#0a0a0a\"\r\n                     d=\"M86.2,39.6c0.2,0.6,0.8,0.9,1.4,0.7c0.6-0.2,0.9-0.9,0.6-2.1c0.3,1.2,1,1.7,1.6,1.5c0.6-0.2,1-0.8,0.8-1.4\"></path>\r\n               <path fill=\"#ffffff\" stroke=\"#0a0a0a\"\r\n                     d=\"M82.5,45.9c0,0.5,0.1,0.9,0.5,1.3c0.4,0.4,1,0.6,1.6,0.3c0.3-0.1,0.5-0.3,0.7-0.4c0.5-0.2,1.2,0.1,1.5,0.6 c0.3,0.5,0.3,1,0.3,1.6c0.6-0.6,1-1.4,1.3-2.2c0.2-0.7,0.4-1.5,0.2-2.2c-0.2-0.7-0.8-1.3-1.5-1.5c-0.9-0.2-1.8,0.2-2.5,0.7\"></path>\r\n               <path fill=\"#ffffff\" stroke=\"#0a0a0a\"\r\n                     d=\"M96.8,44.1c0.1,0.7,0.1,1.4-0.2,2c-0.3,0.6-0.9,1-1.5,0.7c-0.3-0.1-0.5-0.4-0.8-0.4c-0.6-0.2-1.2,0.3-1.4,0.9 c-0.2,0.6-0.1,1.2-0.1,1.9c-0.6-0.7-1.2-1.5-1.6-2.3c-0.4-0.7-0.6-1.5-0.6-2.2c0-0.8,0.3-1.6,0.9-2c0.7-0.5,1.7-0.5,2.6-0.1\"></path>\r\n               <path fill=\"#28292f\"\r\n                     d=\"M85.3,37.2c0.1,0.3,1.2,0.2,2.5-0.3c1.3-0.4,2.2-1.1,2.1-1.4c-0.1-0.3-1.2-0.2-2.5,0.3 C86.1,36.3,85.2,36.9,85.3,37.2z\"></path>\r\n               <path fill=\"#0a0a0a\"\r\n                     d=\"M91.5,35c0.3,0.7,0,1.4-0.7,1.6c-0.6,0.2-1.3-0.1-1.6-0.8c-0.2-0.6,0.1-1.3,0.7-1.6C90.6,33.9,91.3,34.3,91.5,35z\"></path>\r\n               <path fill=\"#0a0a0a\"\r\n                     d=\"M85.9,37c0.2,0.6-0.1,1.2-0.7,1.4c-0.6,0.2-1.3-0.1-1.5-0.6c-0.2-0.5,0.1-1.2,0.7-1.4C85,36.2,85.7,36.4,85.9,37z\"></path>\r\n               <path fill=\"none\" stroke=\"#0a0a0a\"\r\n                     d=\"M89.7,29c0.4,0.7-1.4,2.2-3.8,3.4c-2.5,1.2-4.7,1.7-4.9,1.2c-0.3-0.5,1.4-2,3.8-3.4S89.4,28.4,89.7,29z\"></path>\r\n\r\n            </g>\r\n         </svg>\r\n      </div>\r\n   )\r\n}","import {Dispatch} from \"redux\";\r\nimport {authAPI, profileAPI, RESULT_CODE, securityApi} from \"../../api/api\";\r\nimport {installCaughtError} from \"./app-reducer\";\r\nimport {PhotoType} from \"./profile-reducer\";\r\nimport {ThunkAction} from \"redux-thunk\";\r\nimport {AppRootStateT} from \"../redux-store\";\r\n\r\nexport enum ACTION_TYPE_AUTH {\r\n   SET_USER_DATA = 'social_network/auth/SET_USER_DATA',\r\n   SET_RESULT_STATUS = 'social_network/auth/SET_RESULT_STATUS',\r\n   GET_CAPTCHA_SUCCESS = 'social_network/auth/GET_CAPTCHA_SUCCESS',\r\n   SET_PHOTO = 'social_network/auth/SET_PHOTO',\r\n   SET_LOGOUT = 'social_network/auth/SET_LOGOUT',\r\n}\r\n\r\nexport type FormDataType = {\r\n   email: string,\r\n   password: string,\r\n   remember: boolean\r\n   captcha: string\r\n}\r\n\r\nexport type UserDataType = {\r\n   id: number\r\n   email: string\r\n   login: string\r\n}\r\n\r\nexport type AuthStateType = {\r\n   userData: UserDataType | null\r\n   photo: PhotoType | null\r\n   isAuth: boolean\r\n   logout: boolean\r\n   statusMessages: string\r\n   resultStatusMessage: boolean\r\n   captchaUrl: string | null\r\n}\r\n\r\ntype ActionType = ReturnType<typeof setUserDataAC>\r\n   | ReturnType<typeof setStatusMessAC>\r\n   | ReturnType<typeof getCaptchaUrlSuccess>\r\n   | ReturnType<typeof setAuthorizedUserPhoto>\r\n   | ReturnType<typeof setLogout>\r\n\r\ntype ThunkActionT = ThunkAction<void, AppRootStateT, unknown, ActionType>\r\n\r\nconst initialState: AuthStateType = {\r\n   userData: null,\r\n   isAuth: false,\r\n   logout: false,\r\n   photo: null,\r\n   statusMessages: '',\r\n   resultStatusMessage: true,\r\n   captchaUrl: null\r\n}\r\n\r\nexport const authReducer = (state = initialState, action: ActionType): AuthStateType => {\r\n   switch (action.type) {\r\n      case ACTION_TYPE_AUTH.SET_USER_DATA:\r\n         return {...state, userData: action.userData, isAuth: action.isAuth}\r\n\r\n      case ACTION_TYPE_AUTH.SET_RESULT_STATUS:\r\n         return {\r\n            ...state,\r\n            statusMessages: action.message,\r\n            resultStatusMessage: action.resultStatusMessage\r\n         }\r\n      case ACTION_TYPE_AUTH.GET_CAPTCHA_SUCCESS:\r\n         return {...state, captchaUrl: action.url}\r\n\r\n      case ACTION_TYPE_AUTH.SET_PHOTO:\r\n         return {...state, photo: action.photo}\r\n\r\n      case ACTION_TYPE_AUTH.SET_LOGOUT:\r\n         return {...state, logout: action.logout}\r\n\r\n      default:\r\n         return state\r\n   }\r\n}\r\n\r\nexport const setUserDataAC = (userData: UserDataType | null, isAuth: boolean) => {\r\n   return {\r\n      type: ACTION_TYPE_AUTH.SET_USER_DATA,\r\n      userData,\r\n      isAuth,\r\n   } as const\r\n}\r\n\r\nconst setLogout = (logout: boolean) => {\r\n   return {\r\n      type: ACTION_TYPE_AUTH.SET_LOGOUT, logout\r\n   } as const\r\n}\r\n\r\nexport const setStatusMessAC = (message: string, resultStatusMessage: boolean) => ({\r\n   type: ACTION_TYPE_AUTH.SET_RESULT_STATUS,\r\n   message,\r\n   resultStatusMessage\r\n} as const)\r\n\r\nexport const getUserData = () => {\r\n   return async (dispatch: Dispatch<ActionType>) => {\r\n      const response = await authAPI.getUserData()\r\n\r\n      if (response.resultCode === 0) {\r\n         dispatch(setUserDataAC(response.data, true))\r\n\r\n         const authUserProfile = await profileAPI.getProfile(response.data.id)\r\n         dispatch(setAuthorizedUserPhoto(authUserProfile.photos))\r\n      }\r\n\r\n      response.resultCode !== 0 && dispatch(setStatusMessAC(response.messages[0], false))\r\n   }\r\n}\r\n\r\nexport const getCaptchaUrlSuccess = (url: string) => ({\r\n   type: ACTION_TYPE_AUTH.GET_CAPTCHA_SUCCESS,\r\n   url\r\n} as const)\r\n\r\nexport const setAuthorizedUserPhoto = (photo: PhotoType | null) => ({\r\n   type: ACTION_TYPE_AUTH.SET_PHOTO,\r\n   photo\r\n} as const)\r\n\r\nexport const login = (data: FormDataType): ThunkActionT => {\r\n   return async (dispatch) => {\r\n      const response = await authAPI.login(data)\r\n\r\n      response.resultCode !== RESULT_CODE.SUCCESSFULLY && dispatch(setStatusMessAC(response.messages[0], false))\r\n      response.resultCode === RESULT_CODE.CAPTCHA && await dispatch(getCaptchaUrl())\r\n\r\n      if (response.resultCode === RESULT_CODE.SUCCESSFULLY) {\r\n         dispatch(setStatusMessAC('Successful login', true))\r\n\r\n         dispatch(setLogout(false))\r\n\r\n         await dispatch(getUserData())\r\n      }\r\n   }\r\n}\r\n\r\nexport const logout = (): ThunkActionT => {\r\n   return async (dispatch) => {\r\n      const response = await authAPI.logout()\r\n\r\n      if (response.data.resultCode === RESULT_CODE.SUCCESSFULLY) {\r\n         dispatch(setUserDataAC(null, false))\r\n         dispatch(setAuthorizedUserPhoto(null))\r\n         dispatch(setLogout(true))\r\n      }\r\n\r\n      response.data.resultCode !== RESULT_CODE.SUCCESSFULLY && dispatch(installCaughtError(response.data.messages[0], 'warning'))\r\n   }\r\n}\r\n\r\nexport const getCaptchaUrl = () => async (dispatch: Dispatch<ActionType>) => {\r\n   const response = await securityApi.getCaptchaUrl()\r\n\r\n   dispatch(getCaptchaUrlSuccess(response.data.url))\r\n}"],"sourceRoot":""}