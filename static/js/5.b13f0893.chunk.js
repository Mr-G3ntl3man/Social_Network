(this.webpackJsonpsocial_network=this.webpackJsonpsocial_network||[]).push([[5],{502:function(e,t,a){"use strict";t.a=a.p+"static/media/defaultAvatar.153ee148.jpg"},504:function(e,t,a){e.exports={mainWrap:"chat_mainWrap__4IgBi",addMess:"chat_addMess__1co1R",userMess:"chat_userMess__3hGtu",myMess:"chat_myMess__2F2_o",userText:"chat_userText__2Gmag",myText:"chat_myText__SIBSi",messageWrap:"chat_messageWrap__2n3tL",avatar:"chat_avatar__269cD"}},513:function(e,t,a){"use strict";a.r(t),a.d(t,"Chat",(function(){return _}));var s=a(17),c=a(0),r=a.n(c),n=a(504),i=a.n(n),o=a(27),u=a(202),l=a(50),j=a(486),d=a(502),h=a(1),b=r.a.memo((function(e){var t=e.user,a=Object(o.d)((function(e){var t;return null===(t=e.auth.userData)||void 0===t?void 0:t.id})),s=Object(h.jsxs)("div",{className:i.a.userMess,children:[Object(h.jsx)("div",{children:Object(h.jsx)(l.b,{to:"/profile/".concat(t.userId),children:Object(h.jsx)(j.a,{style:t.photo?{}:{border:"2px solid #7e7e7e"},className:i.a.avatar,src:t.photo||d.a,size:"large"})})}),Object(h.jsxs)("p",{className:i.a.userText,children:[Object(h.jsx)("span",{children:t.userName}),t.message]})]}),c=Object(h.jsx)("div",{className:i.a.myMess,children:Object(h.jsx)("p",{className:i.a.myText,children:t.message})});return a===t.userId?c:s})),m=a(483),O=a(481),f=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1],n=Object(o.d)((function(e){return e.chat.status})),l=Object(o.c)(),j=function(e){n===u.a.READY&&"Enter"===e.key&&a&&(l(Object(u.c)(a)),r(""))};return Object(h.jsxs)("div",{className:i.a.addMess,children:[Object(h.jsx)(m.a,{onKeyPress:j,value:a,onChange:function(e){return r(e.currentTarget.value)},fullWidth:!0,label:"Write message",margin:"normal",variant:"outlined",multiline:!0,minRows:1,maxRows:10}),Object(h.jsx)(O.a,{style:{fontFamily:"Mochiy Pop P One, sans-serif"},disabled:n!==u.a.READY,onClick:function(){a&&(l(Object(u.c)(a)),r(""))},onKeyPress:j,variant:"contained",color:"primary",children:"Send message"})]})},p=a(217),_=function(e){var t=Object(o.d)((function(e){return e.chat.status})),a=Object(o.d)((function(e){return e.chat.messages})),r=Object(o.d)((function(e){return e.chat.error})),n=Object(c.useState)(!1),l=Object(s.a)(n,2),j=l[0],d=l[1],m=Object(c.useState)(!1),O=Object(s.a)(m,2),_=O[0],v=O[1],x=a.map((function(e){return Object(h.jsx)(b,{user:e},e.id)})),g=Object(c.useRef)(null),y=Object(o.c)();Object(c.useEffect)((function(){return y(Object(u.d)()),function(){y(Object(u.e)())}}),[y]),Object(c.useEffect)((function(){var e=g.current;return _?j&&e&&e.scrollBy({top:e.scrollHeight,behavior:"smooth"}):e&&(e.scrollTop=e.scrollHeight),function(){v(!1)}}),[a]);return Object(h.jsxs)(h.Fragment,{children:[t===u.a.ERROR&&Object(h.jsx)(p.a,{messages:"Something went wrong, please reload the page!!!",severity:"error",open:r,anchorOrigin:{vertical:"top",horizontal:"center"}}),Object(h.jsxs)("div",{className:i.a.mainWrap,children:[Object(h.jsx)("div",{ref:g,onScroll:function(e){var t=g.current;t&&(t.clientHeight>=Math.floor(t.scrollHeight-t.scrollTop)?(!j&&d(!0),v(!0)):j&&d(!1))},className:i.a.messageWrap,children:x}),Object(h.jsx)(f,{})]})]})};t.default=_}}]);
//# sourceMappingURL=5.b13f0893.chunk.js.map